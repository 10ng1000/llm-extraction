(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46261a9a","chunk-baec366a"],{"6c91":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page bg-white"},[i("el-page-header",{staticClass:"page-header",attrs:{content:"版本列表"},on:{back:e.goBack}}),i("vxe-toolbar",{attrs:{refresh:{query:e.refreshList}}}),i("div",{staticStyle:{height:"calc(100% - 80px)"}},[i("vxe-table",{ref:"formDefinitionJsonTable",attrs:{border:"inner","auto-resize":"",resizable:"",height:"auto",loading:e.loading,size:"small","show-header-overflow":"","show-overflow":"","highlight-hover-row":"","menu-config":{},"print-config":{},"import-config":{},"export-config":{},"sort-config":{remote:!0},data:e.dataList,"checkbox-config":{}},on:{"sort-change":e.sortChangeHandle}},[i("vxe-column",{attrs:{type:"seq",width:"40"}}),i("vxe-column",{attrs:{type:"checkbox",width:"40px"}}),i("vxe-column",{attrs:{title:"表单定义id",field:"formDefinitionId",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(i){return e.view(t.row.id)}}},[e._v(e._s(t.row.formDefinitionId))])]}}])}),i("vxe-column",{attrs:{title:"流程表单结构体",field:"json",sortable:""}}),i("vxe-column",{attrs:{title:"版本号",field:"version",sortable:""}}),i("vxe-column",{attrs:{title:"状态",field:"status",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.status?i("el-tag",{attrs:{size:"small",type:"success"}},[e._v("已发布")]):i("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("未发布")])]}}])}),i("vxe-column",{attrs:{title:"是否主版本",field:"isPrimary",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.isPrimary?i("el-tag",{attrs:{size:"small",type:"success"}},[e._v("主版本")]):i("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("非主版本")])]}}])}),i("vxe-column",{attrs:{title:"操作",width:"300px",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",icon:"el-icon-view",size:"small"},on:{click:function(i){return e.view(t.row.id)}}},[e._v("预览")]),"0"===t.row.isPrimary?i("el-button",{attrs:{type:"text",icon:"el-icon-edit",size:"small"},on:{click:function(i){return e.updatePrimary(t.row.id)}}},[e._v("设置为主版本")]):e._e(),"0"===t.row.isPrimary?i("el-button",{attrs:{type:"text",icon:"el-icon-delete",size:"small"},on:{click:function(i){return e.del(t.row.id)}}},[e._v("删除")]):e._e()]}}])})],1)],1),i("vxe-pager",{attrs:{background:"",size:"small","current-page":e.tablePage.currentPage,"page-size":e.tablePage.pageSize,total:e.tablePage.total,"page-sizes":[10,20,100,1e3,{label:"全量数据",value:1e6}],layouts:["PrevPage","JumpNumber","NextPage","FullJump","Sizes","Total"]},on:{"page-change":e.currentChangeHandle}}),i("FormDefinitionJsonForm",{ref:"formDefinitionJsonForm",on:{refreshDataList:e.refreshList}})],1)},n=[],a=(i("a4d3"),i("4de4"),i("4160"),i("a15b"),i("d81d"),i("e439"),i("dbb4"),i("b64b"),i("159b"),i("2fa7")),o=i("a682"),s=i("76d6");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u={data:function(){return{searchForm:{formDefinitionId:"",version:"",status:"",isPrimary:""},dataList:[],tablePage:{total:0,currentPage:1,pageSize:10,orders:[]},loading:!1}},components:{FormDefinitionJsonForm:o["default"]},activated:function(){this.refreshList()},watch:{"$route.query.id":{handler:function(e){this.searchForm.formDefinitionId=e},immediate:!0,deep:!1}},methods:{refreshList:function(){var e=this;this.loading=!0,s["a"].list(c({current:this.tablePage.currentPage,size:this.tablePage.pageSize,orders:this.tablePage.orders},this.searchForm)).then((function(t){var i=t.data;e.dataList=i.records,e.tablePage.total=i.total,e.loading=!1}))},currentChangeHandle:function(e){var t=e.currentPage,i=e.pageSize;this.tablePage.currentPage=t,this.tablePage.pageSize=i,this.refreshList()},sortChangeHandle:function(e){this.tablePage.orders=[],null!=e.order&&this.tablePage.orders.push({column:this.$utils.toLine(e.property),asc:"asc"===e.order}),this.refreshList()},view:function(e){this.$refs.formDefinitionJsonForm.init(e)},del:function(e){var t=this,i=e||this.$refs.formDefinitionJsonTable.getCheckboxRecords().map((function(e){return e.id})).join(",");this.$confirm("确定删除该版本吗? 删除之后，已发起的流程如果使用了该版本，将无法查看表单内容!","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,s["a"].delete(i).then((function(e){var i=e.data;t.loading=!1,t.$message.success(i),t.refreshList()}))}))},updatePrimary:function(e){var t=this;this.$confirm("确定设置该版本为主版本吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,s["a"].updatePrimary(e).then((function(e){var i=e.data;t.loading=!1,t.$message.success(i),t.refreshList()}))}))},goBack:function(){this.$store.dispatch("tagsView/delView",{fullPath:this.$route.fullPath}),this.$router.push({path:"/flowable/form/FormDefinitionList"})}}},f=u,d=(i("a904"),i("2877")),h=Object(d["a"])(f,r,n,!1,null,"722a2c55",null);t["default"]=h.exports},"76d6":function(e,t,i){"use strict";var r=i("8f4d");t["a"]={save:function(e){return Object(r["a"])({url:"/extension/formDefinitionJson/save",method:"post",data:e})},updatePrimary:function(e){return Object(r["a"])({url:"/extension/formDefinitionJson/updatePrimary",method:"put",params:{id:e}})},delete:function(e){return Object(r["a"])({url:"/extension/formDefinitionJson/delete",method:"delete",params:{ids:e}})},queryById:function(e){return Object(r["a"])({url:"/extension/formDefinitionJson/queryById",method:"get",params:{id:e}})},list:function(e){return Object(r["a"])({url:"/extension/formDefinitionJson/list",method:"get",params:e})}}},a682:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.title,"close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[e.visible?i("fm-generate-form",{ref:"generateForm",attrs:{data:e.options}}):e._e(),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:function(t){e.visible=!1}}},[e._v("关闭")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.visible=!1}}},[e._v("确定")])],1)],1)],1)},n=[],a=i("76d6"),o={data:function(){return{title:"预览表单",method:"",visible:!1,loading:!1,options:{list:[]}}},methods:{init:function(e){var t=this;this.loading=!0,a["a"].queryById(e).then((function(e){var i=e.data;t.options=JSON.parse(i.json),t.visible=!0,t.loading=!1}))}}},s=o,l=i("2877"),c=Object(l["a"])(s,r,n,!1,null,null,null);t["default"]=c.exports},a904:function(e,t,i){"use strict";var r=i("f87f"),n=i.n(r);n.a},f87f:function(e,t,i){}}]);