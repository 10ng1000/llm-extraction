(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d2c5c68","chunk-7fc46418"],{"0ccb":function(e,t,i){var n=i("e330"),a=i("50c4"),r=i("577e"),l=i("1148"),o=i("1d80"),s=n(l),d=n("".slice),u=Math.ceil,c=function(e){return function(t,i,n){var l,c,f=r(o(t)),p=a(i),m=f.length,v=void 0===n?" ":r(n);return p<=m||""==v?f:(l=p-m,c=s(v,u(l/v.length)),c.length>l&&(c=d(c,0,l)),e?f+c:c+f)}};e.exports={start:c(!1),end:c(!0)}},"47e8":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.title,"close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"inputForm",class:"view"===e.method?"readonly":"",attrs:{model:e.inputForm,size:"small",disabled:"view"===e.method,"label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"原始pdf文件名",prop:"filenameUpload",rules:[{required:!0,message:"原始pdf文件名不能为空",trigger:"blur"}]}},[i("el-input",{attrs:{placeholder:"请填写原始pdf文件名"},model:{value:e.inputForm.filenameUpload,callback:function(t){e.$set(e.inputForm,"filenameUpload",t)},expression:"inputForm.filenameUpload"}})],1)],1)],1),i("el-row",{directives:[{name:"show",rawName:"v-show",value:!e.rowHidden,expression:"!rowHidden"}]},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"生成text文件名",prop:"filenameGen"}},[i("el-input",{attrs:{placeholder:"请填写生成text文件名",readonly:"",disabled:!0},model:{value:e.inputForm.filenameGen,callback:function(t){e.$set(e.inputForm,"filenameGen",t)},expression:"inputForm.filenameGen"}})],1)],1)],1),i("el-row",{directives:[{name:"show",rawName:"v-show",value:!e.fileListHidden,expression:"!fileListHidden"}]},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"上传文件",rules:[{required:!0,message:"请上传文件"}]}},[i("input",{ref:"fileInput",attrs:{type:"file",accept:".pdf","max-size":"200000000",multiple:!1},on:{change:function(t){return e.upload(t)}}})])],1)],1),i("el-row",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"识别状态",prop:"status",readonly:"",disabled:!0}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.inputForm.status,callback:function(t){e.$set(e.inputForm,"status",t)},expression:"inputForm.status"}},e._l(e.$dictUtils.getDictList("generate_status"),(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible=!1}}},[e._v("关闭")]),"view"!=e.method?i("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{size:"small",type:"primary"},on:{click:function(t){return e.doSubmit()}}},[e._v("确定")]):e._e()],1)],1)],1)},a=[],r=(i("c975"),i("0d03"),i("b0c0"),i("d3b7"),i("25f0"),i("4d90"),i("a99b")),l={data:function(){return{uploadUrl:"http://82.157.118.175:9988/uploadfile/",file:null,fileList:[],fileListHidden:!1,rowHidden:!1,disabled:!0,title:"",method:"",visible:!1,loading:!1,inputForm:{id:"",filenameUpload:"",filenameGen:"",status:""}}},components:{},ocrPdfToTextService:null,created:function(){this.ocrPdfToTextService=new r["a"],this.resetFile()},mounted:function(){this.file=null},methods:{resetFile:function(){var e=document.querySelector('input[type="file"]');e&&(e.value=null)},upload:function(e){var t=e.target.files[0],i=["application/pdf"];if(t&&-1===i.indexOf(t.type))return e.target.value="",this.file=null,void alert("只能上传pdf类型的文件,请重新选择");this.file=e.target.files[0],this.inputForm.filenameUpload=e.target.files[0].name,console.log(e.target.files[0])},init:function(e,t){var i=this;this.resetFile(),this.method=e,this.inputForm.id=t,"add"===e?(this.title="新建Ocr识别pdf为文字",this.rowHidden=!0,this.fileListHidden=!1):"edit"===e?(this.title="修改Ocr识别pdf为文字",this.rowHidden=!1,this.fileListHidden=!0):"view"===e&&(this.title="查看Ocr识别pdf为文字",this.rowHidden=!1,this.fileListHidden=!0),this.visible=!0,this.loading=!1,this.disabled=!1,this.$nextTick((function(){i.$refs.inputForm.resetFields(),"edit"!==e&&"view"!==e||(i.loading=!0,i.ocrPdfToTextService.queryById(i.inputForm.id).then((function(t){var n=t.data;i.inputForm=i.recover(i.inputForm,n),i.disabled="view"===e,i.loading=!1})))}))},doSubmit:function(){var e=this;this.$refs["inputForm"].validate((function(t){if(t)if(null===e.file)alert("未选择文件!");else{var i=new Date;if(""===e.inputForm.filenameGen){var n=i.getFullYear(),a=(i.getMonth()+1).toString().padStart(2,"0"),r=i.getDate().toString().padStart(2,"0"),l=i.getHours().toString().padStart(2,"0"),o=i.getMinutes().toString().padStart(2,"0"),s=i.getSeconds().toString().padStart(2,"0");e.inputForm.filenameGen=n+a+r+l+o+s}e.inputForm.status=0,e.loading=!0;var d=e.file,u=e.inputForm.filenameGen,c=new FormData;c.append("file",d),c.append("filename",u);var f=new XMLHttpRequest;f.open("POST","http://82.157.118.175:9988/uploadfile/"),f.onload=function(){if(200===f.status){var e=JSON.parse(f.responseText);console.log(e)}else console.error("请求失败")},e.file=null,e.resetFile(),f.send(c),e.ocrPdfToTextService.save(e.inputForm).then((function(t){var i=t.data;e.visible=!1,e.$message.success("文件上传成功"),console.log(i),e.$emit("refreshDataList"),e.loading=!1})).catch((function(){e.loading=!1}))}}))}}},o=l,s=i("2877"),d=Object(s["a"])(o,n,a,!1,null,null,null);t["default"]=d.exports},"4d90":function(e,t,i){"use strict";var n=i("23e7"),a=i("0ccb").start,r=i("9a0c");n({target:"String",proto:!0,forced:r},{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"53fe":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("85d3"),a=i.n(n);function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),a()(e,n.key,n)}}function l(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}},"9a0c":function(e,t,i){var n=i("342f");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},"9f12":function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",(function(){return n}))},a99b:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("9f12"),a=i("53fe"),r=i("8f4d"),l=function(){function e(){Object(n["a"])(this,e)}return Object(a["a"])(e,[{key:"save",value:function(e){return Object(r["a"])({url:"/ocrpdftotext/ocrPdfToText/save",method:"post",data:e})}},{key:"delete",value:function(e){return Object(r["a"])({url:"/ocrpdftotext/ocrPdfToText/delete",method:"delete",params:{ids:e}})}},{key:"queryById",value:function(e){return Object(r["a"])({url:"/ocrpdftotext/ocrPdfToText/queryById",method:"get",params:{id:e}})}},{key:"list",value:function(e){return Object(r["a"])({url:"/ocrpdftotext/ocrPdfToText/list",method:"get",params:e})}}]),e}()}}]);