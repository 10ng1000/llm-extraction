(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0deeb3"],{8863:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{"close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"inputForm",attrs:{size:"small",model:e.inputForm,"status-icon":"","label-width":"120px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.inputFormSubmit()},submit:function(e){e.preventDefault()}}},[i("el-row",{attrs:{gutter:15}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"流程分类",prop:"category",rules:[{required:!0,message:"流程分类不能为空",trigger:"blur"}]}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.inputForm.category,callback:function(t){e.$set(e.inputForm,"category",t)},expression:"inputForm.category"}},e._l(e.$dictUtils.getDictList("act_category"),(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"流程文件",prop:"file",rules:[{required:!0,message:"流程文件不能为空",trigger:"blur"}]}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{limit:1,"on-change":e.handleChange,action:this.$http.BASE_URL+"/app/rest/import-process-model","on-success":e.handleSuccess,"on-error":e.handleError,"before-upload":e.beforeUpload,"auto-upload":!1,"show-file-list":!0}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只允许导入“zip、bar、bpmn、bpmn20.xml”格式文件！")])],1)],1)],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:function(t){e.visible=!1}}},[e._v("关闭")]),i("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary",icon:"el-icon-circle-check"},on:{click:function(t){return e.inputFormSubmit()}}},[e._v("确定")])],1)],1)},l=[],n=(i("99af"),i("c975"),i("b0c0"),{data:function(){return{visible:!1,loading:!1,inputForm:{file:"",category:""}}},methods:{init:function(){var e=this;this.visible=!0,this.$nextTick((function(){e.$refs.inputForm.resetFields(),e.$refs.upload.clearFiles()}))},beforeUpload:function(e){var t=e.name.indexOf(".zip")>=0||e.name.indexOf(".bar")>=0||e.name.indexOf(".bpmn")>=0||e.name.indexOf(".bpmn20.xml")>=0,i=e.size/1024/1024<10;return t?i?(this.loading=!0,!0):(this.$message.error("上传文件大小不能超过 10MB!"),!1):(this.$message.error("只能上传zip、bar、bpmn、bpmn20.xml文件!"),!1)},handleSuccess:function(e){this.$emit("refreshList"),window.open("".concat("http://82.157.118.175:8094/jeeplus-vue","/static/modler/index.html#/editor/").concat(e.id)),this.visible=!1,this.loading=!1},handleError:function(e){var t=e.message;this.$message.error(t),this.loading=!1},handleChange:function(e){this.inputForm.file=e.name},inputFormSubmit:function(){var e=this;this.$refs["inputForm"].validate((function(t){t&&e.$refs.upload.submit()}))}}}),o=n,a=i("2877"),s=Object(a["a"])(o,r,l,!1,null,null,null);t["default"]=s.exports}}]);