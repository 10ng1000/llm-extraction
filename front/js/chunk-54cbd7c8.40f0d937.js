(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54cbd7c8"],{"3bbe1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{id:"tag-editor",title:"文件标签编辑",visible:e.tagEditorShow},on:{"update:visible":function(t){e.tagEditorShow=t}}},[a("div",{staticStyle:{"padding-bottom":"10px"}},[a("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.currentTagPrefix,callback:function(t){e.currentTagPrefix=t},expression:"currentTagPrefix"}},e._l(e.tagPrefix,(function(t){return a("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)})),1)],1),a("div",{staticStyle:{"padding-bottom":"10px"}},[a("el-select",{attrs:{"allow-create":"",size:"small",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":e.getRelatedTags,loading:e.searchLoading},model:{value:e.currentTagSuffix,callback:function(t){e.currentTagSuffix=t},expression:"currentTagSuffix"}},e._l(e.related_tags,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{staticClass:"button-new-tag",attrs:{type:"primary",size:"small"},on:{click:e.handleInputConfirm}},[e._v("添加标签")])],1),e._l(e.tags,(function(t){return a("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1,size:"medium"},on:{close:function(a){return e.handleDelete(t)}}},[e._v(" "+e._s(t)+" ")])}))],2)],1)},n=[],l=(a("a4d3"),a("e01a"),a("d28b"),a("c975"),a("fb6a"),a("a434"),a("b0c0"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("ddb0"),{name:"TagEditor.vue",data:function(){return{currentTagSuffix:"",currentTagPrefix:"",tagPrefix:[{label:"常用",options:[{value:"模版",label:"模板"},{value:"历史文件",label:"历史文件"}]},{label:"默认",options:[{value:"默认",label:"默认"}]}],tagEditorShow:this.tagEditorShow,fileID:this.fileID,tags:[],related_tags:[],inputVisible:!1,inputValue:"",searchLoading:!1}},props:{tagEditorShow:{type:Boolean,required:!0},fileID:{type:String,required:!0}},created:function(){this.getAllTags()},mounted:function(){this.getFileTags()},methods:{getRelatedTags:function(e){this.searchLoading=!0;var t=this,a={input:e,num:20};t.$api.tagEditor.getRelatedLabels(a).then((function(e){if(200===e.code){var a=[],i=!0,n=!1,l=void 0;try{for(var r,o=e.data[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var s=r.value,u=void 0;u=-1!=s.name.indexOf(":")?s.name.split(":").slice(1):s.name;var c={value:u,label:s.name};a.push(c)}}catch(f){n=!0,l=f}finally{try{i||null==o.return||o.return()}finally{if(n)throw l}}t.related_tags=a,t.searchLoading=!1}})).catch((function(e){t.searchLoading=!1,t.$message.error("getRelatedTags: "+e)}))},getAllTags:function(){var e=this;e.$api.tagEditor.getLabels().then((function(t){if(200===t.code){var a=[],i=!0,n=!1,l=void 0;try{for(var r,o=t.data[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var s=r.value,u={value:s.name,label:s.name};a.push(u)}}catch(c){n=!0,l=c}finally{try{i||null==o.return||o.return()}finally{if(n)throw l}}e.all_tags=a}})).catch((function(t){e.$message.error("getAllTags: "+t)}))},getFileTags:function(){var e=this,t={fileID:e.fileID};e.$api.tagEditor.getLabels(t).then((function(t){if(200===t.code){var a=[],i=!0,n=!1,l=void 0;try{for(var r,o=t.data[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var s=r.value;a.push(s.name)}}catch(u){n=!0,l=u}finally{try{i||null==o.return||o.return()}finally{if(n)throw l}}e.tags=a}})).catch((function(t){e.$message.error("getFileTags: "+t)}))},handleDelete:function(e){var t=this,a=this,i={fileID:a.fileID,name:e};a.$api.tagEditor.deleteFileLabel(i).then((function(a){200===a.code&&t.tags.splice(t.tags.indexOf(e),1)})).catch((function(e){a.$message.error("getFileTags: "+e)}))},handleInputConfirm:function(){var e;if(e="默认"===this.currentTagPrefix?this.currentTagSuffix:this.currentTagPrefix+":"+this.currentTagSuffix,e){var t=this,a={fileID:t.fileID,name:e};t.$api.tagEditor.createLabel(a).then((function(a){200===a.code&&t.tags.push(e)})).catch((function(e){t.$message.error("handleInputConfirm: "+e)}))}this.inputVisible=!1,this.inputValue=""}},watch:{tagEditorShow:function(e){this.$emit("tagEditorShow",e)},fileID:function(){this.getFileTags()}}}),r=l,o=(a("965b"),a("2877")),s=Object(o["a"])(r,i,n,!1,null,"f7806f06",null);t["default"]=s.exports},7432:function(e,t,a){},"965b":function(e,t,a){"use strict";var i=a("7432"),n=a.n(i);n.a}}]);