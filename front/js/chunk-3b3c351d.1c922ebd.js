(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b3c351d"],{"1fb6":function(t,e,i){"use strict";var a=i("d576"),n=i.n(a);n.a},40544:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-input",{staticClass:"input-with-select",staticStyle:{"line-hight":"40px"},attrs:{placeholder:t.placeholder,disabled:t.disabled,size:t.size,readonly:!0},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[i("el-button",{attrs:{slot:"append",disabled:t.disabled,icon:"el-icon-search"},on:{click:t.showSelectDialog},slot:"append"})],1),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"gridDialog",attrs:{title:t.title,"close-on-click-modal":!1,"append-to-body":!0,width:"900px",visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[i("el-row",{attrs:{gutter:15}},[i("el-col",{attrs:{span:19}},[i("el-form",{ref:"searchForm",staticClass:"query-form",attrs:{size:"small",inline:!0},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.refreshList()},submit:function(t){t.preventDefault()}}},[t._l(t.searchs,(function(e,a){return i("el-form-item",{key:a,attrs:{prop:e.prop}},[i("el-input",{attrs:{size:"small",placeholder:e.label,clearable:""},model:{value:t.searchForms[a],callback:function(e){t.$set(t.searchForms,a,e)},expression:"searchForms[index]"}})],1)})),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(e){return t.refreshList()}}},[t._v("查询")]),i("el-button",{attrs:{size:"small",icon:"el-icon-refresh-right"},on:{click:function(e){return t.resetSearch()}}},[t._v("重置")])],1)],2),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"gridTable",staticStyle:{width:"100%"},attrs:{data:t.dataList,size:"small",height:"400px",border:""},on:{"selection-change":t.selectionChangeHandle,"sort-change":t.sortChangeHandle}},[t.limit<=1?i("el-table-column",{attrs:{"header-align":"center",align:"center",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-radio",{attrs:{label:e.row.id,value:t.dataListAllSelections[0]&&t.dataListAllSelections[0].id},nativeOn:{change:function(i){return t.getTemplateRow(e.$index,e.row)}}},[i("span")])]}}],null,!1,3937999144)}):t._e(),t.limit>1?i("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}):t._e(),t._l(t.columns,(function(t,e){return[i("el-table-column",{key:e,attrs:{prop:t.prop,"header-align":"center",align:"center","min-width":"100px",label:t.label}})]}))],2),i("el-pagination",{attrs:{"current-page":t.pageNo,"page-sizes":[5,10,50,100],"page-size":t.pageSize,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}})],1),i("el-col",{attrs:{span:5}},t._l(t.dataListAllSelections,(function(e){return i("el-tag",{key:e.id,attrs:{closable:"","disable-transitions":!1},on:{close:function(i){return t.del(e)}}},[t._v(" "+t._s(e[t.labelName])+" ")])})),1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:function(e){t.visible=!1}}},[t._v("关闭")]),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-check"},on:{click:function(e){return t.doSubmit()}}},[t._v("确定")])],1)],1)],1)},n=[],r=(i("a4d3"),i("99af"),i("4de4"),i("4160"),i("c975"),i("a15b"),i("d81d"),i("a434"),i("b0c0"),i("a9e3"),i("e439"),i("dbb4"),i("b64b"),i("ac1f"),i("1276"),i("159b"),i("2fa7"));function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){Object(r["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var o={data:function(){return{searchForms:[],filterText:"",dataListAllSelections:[],dataListSelections:[],idKey:"id",dataList:[],dynamicTags:[],selectData:[],pageNo:1,pageSize:10,total:0,orders:[],loading:!1,visible:!1,name:""}},props:{limit:{type:Number,default:999999},columns:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},searchs:{type:Array,default:function(){return[]}},dataListUrl:{type:String,default:function(){return null}},queryEntityUrl:{type:String,default:function(){return null}},value:{type:String,default:function(){return null}},title:{type:String,default:function(){return""}},placeholder:{type:String,default:function(){return"请选择"}},labelName:{type:String,default:function(){return""}},labelValue:{type:String,default:function(){return""}},size:{type:String,default:function(){return"small"}}},watch:{value:{handler:function(t){var e=this;this.selectData=[],t&&t.split(",").forEach((function(t){t&&e.$http.get("".concat(e.queryEntityUrl,"?").concat(e.labelValue,"=").concat(t)).then((function(t){var i=t.data;""!==i[e.labelValue]&&e.selectData.push(i)}))}))},immediate:!0,deep:!1},selectData:{handler:function(t){var e=this;this.dataListAllSelections=JSON.parse(JSON.stringify(this.selectData)),this.name=this.dataListAllSelections.map((function(t){return t[e.labelName]})).join(",")},immediate:!1,deep:!0}},methods:{init:function(){var t=this;this.visible=!0,this.$nextTick((function(){t.resetSearch()}))},getTemplateRow:function(t,e){var i=this;this.dataListSelections=[e],this.$nextTick((function(){i.changePageCoreRecordData()}))},setSelectRow:function(){if(!this.dataListAllSelections||this.dataListAllSelections.length<=0)this.$refs.gridTable.clearSelection();else{var t=this.idKey,e=[];this.dataListAllSelections.forEach((function(i){e.push(i[t])})),this.$refs.gridTable.clearSelection();for(var i=0;i<this.dataList.length;i++)e.indexOf(this.dataList[i][t])>=0&&this.$refs.gridTable.toggleRowSelection(this.dataList[i],!0)}},changePageCoreRecordData:function(){var t=this.idKey,e=this;if(this.dataListAllSelections.length<=0)this.dataListSelections.forEach((function(t){e.dataListAllSelections.push(t)}));else{var i=[];this.dataListAllSelections.forEach((function(e){i.push(e[t])}));var a=[];this.dataListSelections.forEach((function(n){a.push(n[t]),i.indexOf(n[t])<0&&e.dataListAllSelections.push(n)}));var n=[];this.dataList.forEach((function(e){a.indexOf(e[t])<0&&n.push(e[t])})),n.forEach((function(a){if(i.indexOf(a)>=0)for(var n=0;n<e.dataListAllSelections.length;n++)if(e.dataListAllSelections[n][t]===a){e.dataListAllSelections.splice(n,1);break}}))}},getAllSelectionData:function(){this.changePageCoreRecordData()},filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},del:function(t){var e=this;this.dataListAllSelections.splice(this.dataListAllSelections.indexOf(t),1),this.$nextTick((function(){e.setSelectRow()}))},refreshList:function(){var t=this;this.loading=!0;var e={};this.searchs.forEach((function(i,a){e[i.prop]=t.searchForms[a]})),this.$http({url:this.dataListUrl,method:"get",params:s({current:this.pageNo,size:this.pageSize,orders:this.orders},e)}).then((function(e){var i=e.data;t.dataList=i.records,t.total=i.total,t.pageNo=i.current,t.loading=!1,t.$nextTick((function(){t.setSelectRow()}))}))},sizeChangeHandle:function(t){var e=this;this.pageSize=t,this.pageNo=1,this.refreshList(),this.$nextTick((function(){e.changePageCoreRecordData()}))},currentChangeHandle:function(t){var e=this;this.pageNo=t,this.refreshList(),this.$nextTick((function(){e.changePageCoreRecordData()}))},selectionChangeHandle:function(t){var e=this;this.dataListSelections=t,this.$nextTick((function(){e.changePageCoreRecordData()}))},sortChangeHandle:function(t){this.orders=[],null!=t.order&&this.orders.push({column:this.$utils.toLine(t.prop),asc:"ascending"===t.order}),this.refreshList()},resetSearch:function(){this.$refs.searchForm.resetFields(),this.searchForms=[],this.refreshList()},doSubmit:function(){var t=this;if(this.limit<this.dataListAllSelections.length)this.$message.error("你最多只能选择".concat(this.limit,"条数据"));else{this.visible=!1,this.name=this.dataListSelections.map((function(e){return e[t.labelName]})).join(",");var e=this.dataListSelections.map((function(e){return e[t.labelValue]})).join(",");this.$emit("getValue",e)}},showSelectDialog:function(){this.visible=!0,this.init()}}},c=o,u=(i("1fb6"),i("2877")),d=Object(u["a"])(c,a,n,!1,null,null,null);e["a"]=d.exports},"931d":function(t,e,i){"use strict";var a=i("8f4d");e["a"]={save:function(t){return Object(a["a"])({url:"/test/grid/testCountry/save",method:"post",data:t})},delete:function(t){return Object(a["a"])({url:"/test/grid/testCountry/delete",method:"delete",params:{ids:t}})},queryById:function(t){return Object(a["a"])({url:"/test/grid/testCountry/queryById",method:"get",params:{id:t}})},list:function(t){return Object(a["a"])({url:"/test/grid/testCountry/list",method:"get",params:t})},exportTemplate:function(){return Object(a["a"])({url:"/test/grid/testCountry/import/template",method:"get",responseType:"blob"})},exportExcel:function(t){return Object(a["a"])({url:"/test/grid/testCountry/export",method:"get",params:t,responseType:"blob"})},importExcel:function(t){return Object(a["a"])({url:"/test/grid/testCountry/import",method:"post",data:t})}}},a190:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:t.title,"close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"inputForm",class:"view"===t.method?"readonly":"",attrs:{model:t.inputForm,size:"small",disabled:"view"===t.method,"label-width":"120px"}},[i("el-row",{attrs:{gutter:15}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"国名",prop:"name",rules:[]}},[i("el-input",{attrs:{placeholder:"请填写国名"},model:{value:t.inputForm.name,callback:function(e){t.$set(t.inputForm,"name",e)},expression:"inputForm.name"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"人口",prop:"sum",rules:[]}},[i("el-input",{attrs:{placeholder:"请填写人口"},model:{value:t.inputForm.sum,callback:function(e){t.$set(t.inputForm,"sum",e)},expression:"inputForm.sum"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"所属洲",prop:"continent.id",rules:[]}},[i("GridSelect",{attrs:{title:"选择所属洲",labelName:"name",labelValue:"id",value:t.inputForm.continent.id,limit:1,columns:[{prop:"name",label:"洲名"}],searchs:[{prop:"name",label:"洲名"}],dataListUrl:"/test/grid/testContinent/list",queryEntityUrl:"/test/grid/testContinent/queryById"},on:{getValue:function(e){t.inputForm.continent.id=e}}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"备注信息",prop:"remarks",rules:[]}},[i("el-input",{attrs:{type:"textarea",placeholder:"请填写备注信息"},model:{value:t.inputForm.remarks,callback:function(e){t.$set(t.inputForm,"remarks",e)},expression:"inputForm.remarks"}})],1)],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.visible=!1}}},[t._v("关闭")]),"view"!=t.method?i("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{size:"small",type:"primary"},on:{click:function(e){return t.doSubmit()}}},[t._v("确定")]):t._e()],1)],1)],1)},n=[],r=i("40544"),l=i("931d"),s={data:function(){return{title:"",method:"",visible:!1,loading:!1,inputForm:{id:"",name:"",sum:"",continent:{id:""},remarks:""}}},components:{GridSelect:r["a"]},methods:{init:function(t,e){var i=this;this.method=t,this.inputForm.id=e,"add"===t?this.title="新建国家":"edit"===t?this.title="修改国家":"view"===t&&(this.title="查看国家"),this.visible=!0,this.loading=!1,this.$nextTick((function(){i.$refs.inputForm.resetFields(),"edit"!==t&&"view"!==t||(i.loading=!0,l["a"].queryById(i.inputForm.id).then((function(t){var e=t.data;i.inputForm=i.recover(i.inputForm,e),i.loading=!1})))}))},doSubmit:function(){var t=this;this.$refs["inputForm"].validate((function(e){e&&(t.loading=!0,l["a"].save(t.inputForm).then((function(e){var i=e.data;t.visible=!1,t.$message.success(i),t.$emit("refreshDataList"),t.loading=!1})).catch((function(){t.loading=!1})))}))}}},o=s,c=i("2877"),u=Object(c["a"])(o,a,n,!1,null,null,null);e["default"]=u.exports},d576:function(t,e,i){}}]);