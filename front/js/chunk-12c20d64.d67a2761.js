(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12c20d64"],{"2c81":function(e,t,r){"use strict";var a=r("8f4d");t["a"]={list:function(e){return Object(a["a"])({url:"/sys/log/list",method:"get",params:e})},mine:function(e){return Object(a["a"])({url:"/sys/log/data/mine",method:"get",params:e})},delete:function(e){return Object(a["a"])({url:"/sys/log/delete",method:"delete",params:{ids:e}})},empty:function(){return Object(a["a"])({url:"/sys/log/empty",method:"delete"})}}},"9ebe":function(e,t,r){"use strict";var a=r("8f4d");t["a"]={save:function(e){return Object(a["a"])({url:"/sys/user/save",method:"post",headers:{arrayFormat:"repeat"},data:e})},saveInfo:function(e){return Object(a["a"])({url:"/sys/user/saveInfo",method:"post",headers:{arrayFormat:"repeat"},data:e})},savePwd:function(e){return Object(a["a"])({url:"/sys/user/savePwd",method:"put",params:e})},delete:function(e){return Object(a["a"])({url:"/sys/user/delete",method:"delete",params:{ids:e}})},queryById:function(e){return Object(a["a"])({url:"/sys/user/queryById",method:"get",params:{id:e}})},getMenus:function(){return Object(a["a"])({url:"/sys/user/getMenus",method:"get"})},info:function(){return Object(a["a"])({url:"/sys/user/info",method:"get"})},list:function(e){return Object(a["a"])({url:"/sys/user/list",method:"get",params:e})},exportTemplate:function(){return Object(a["a"])({url:"/sys/user/import/template",method:"get",responseType:"blob"})},exportExcel:function(e){return Object(a["a"])({url:"/sys/user/export",method:"get",params:e,responseType:"blob"})},importExcel:function(e){return Object(a["a"])({url:"/sys/user/import",method:"post",data:e})}}},a158:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"el-scrollbar__wrap wrap-white padding-20"},[r("div",{staticClass:"el-scrollbar__view"},[r("el-tabs",{attrs:{"tab-position":"left"}},[r("el-tab-pane",{attrs:{label:"基本信息"}},[r("h3",{staticStyle:{"margin-left":"40px"}},[e._v("基本信息")]),r("el-form",{ref:"generalForm",attrs:{size:"small",model:e.generalForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"姓名",rules:[{required:!0,message:"必填项不能为空",trigger:"blur"}],prop:"name"}},[r("el-input",{model:{value:e.generalForm.name,callback:function(t){e.$set(e.generalForm,"name",t)},expression:"generalForm.name"}})],1),r("el-form-item",{attrs:{label:"签名",prop:"sign"}},[r("el-input",{model:{value:e.generalForm.sign,callback:function(t){e.$set(e.generalForm,"sign",t)},expression:"generalForm.sign"}})],1),r("el-form-item",{attrs:{label:"公司",prop:"companyDTO.name"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.generalForm.companyDTO.name,callback:function(t){e.$set(e.generalForm.companyDTO,"name",t)},expression:"generalForm.companyDTO.name"}})],1),r("el-form-item",{attrs:{label:"部门",prop:"officeDTO.name"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.generalForm.officeDTO.name,callback:function(t){e.$set(e.generalForm.officeDTO,"name",t)},expression:"generalForm.officeDTO.name"}})],1),r("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[r("el-input",{model:{value:e.generalForm.remarks,callback:function(t){e.$set(e.generalForm,"remarks",t)},expression:"generalForm.remarks"}})],1),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitGeneralForm()}}},[e._v("保存")])],1)],1)],1),r("el-tab-pane",{attrs:{label:"联系方式"}},[r("h3",{staticStyle:{"margin-left":"40px"}},[e._v("联系方式")]),r("el-form",{ref:"concatForm",attrs:{size:"small",model:e.concatForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"邮箱",rules:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],prop:"email"}},[r("el-input",{model:{value:e.concatForm.email,callback:function(t){e.$set(e.concatForm,"email",t)},expression:"concatForm.email"}})],1),r("el-form-item",{attrs:{label:"手机",prop:"mobile",rules:[{validator:e.validator.isMobile,trigger:"blur"}]}},[r("el-input",{model:{value:e.concatForm.mobile,callback:function(t){e.$set(e.concatForm,"mobile",t)},expression:"concatForm.mobile"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"phone",rules:[{validator:e.validator.isPhone,trigger:"blur"}]}},[r("el-input",{model:{value:e.concatForm.phone,callback:function(t){e.$set(e.concatForm,"phone",t)},expression:"concatForm.phone"}})],1),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitConcatForm()}}},[e._v("保存")])],1)],1)],1),r("el-tab-pane",{attrs:{label:"我的头像"}},[r("el-form",{ref:"photoForm",attrs:{model:e.photoForm,"label-width":"100px"}},[r("el-form-item",{attrs:{prop:"photo"}},[r("image-select",{attrs:{round:"",icon:"el-icon-s-custom",title:"头像"},model:{value:e.photoForm.photo,callback:function(t){e.$set(e.photoForm,"photo",t)},expression:"photoForm.photo"}})],1),r("el-form-item",[r("el-button",{staticStyle:{width:"148px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitPhotoForm()}}},[e._v("保存")])],1)],1)],1),r("el-tab-pane",{attrs:{label:"修改密码"}},[r("h3",{staticStyle:{"margin-left":"40px"}},[e._v("修改密码")]),r("el-form",{ref:"pwdForm",attrs:{size:"small",model:e.pwdForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"旧密码",rules:[{required:!0,message:"必填项不能为空",trigger:"blur"}],prop:"oldPassword"}},[r("el-input",{attrs:{"show-password":""},model:{value:e.pwdForm.oldPassword,callback:function(t){e.$set(e.pwdForm,"oldPassword",t)},expression:"pwdForm.oldPassword"}})],1),r("el-form-item",{attrs:{label:"新密码",rules:[{required:!0,message:"必填项不能为空",trigger:"blur"}],prop:"newPassword"}},[r("el-input",{attrs:{"show-password":""},model:{value:e.pwdForm.newPassword,callback:function(t){e.$set(e.pwdForm,"newPassword",t)},expression:"pwdForm.newPassword"}})],1),r("el-form-item",{attrs:{label:"确认新密码",rules:e.rule,prop:"confirmNewPassword"}},[r("el-input",{attrs:{"show-password":""},model:{value:e.pwdForm.confirmNewPassword,callback:function(t){e.$set(e.pwdForm,"confirmNewPassword",t)},expression:"pwdForm.confirmNewPassword"}})],1),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitPwdForm()}}},[e._v("保存")])],1)],1)],1),r("el-tab-pane",{attrs:{label:"我的日志"}},[r("el-menu",{attrs:{"default-active":"1",mode:"horizontal"},on:{select:e.changeLog}},[r("el-menu-item",{attrs:{index:"1"}},[r("i",{staticClass:"el-icon-setting"}),r("span",{attrs:{slot:"title"},slot:"title"},[e._v("登陆日志")])]),r("el-menu-item",{attrs:{index:"2"}},[r("i",{staticClass:"el-icon-setting"}),r("span",{attrs:{slot:"title"},slot:"title"},[e._v("访问日志")])])],1),r("vxe-table",{ref:"logTable",attrs:{border:"inner","auto-resize":"",resizable:"",height:"500px",loading:e.loading,size:"small","show-header-overflow":"","show-overflow":"","highlight-hover-row":"","menu-config":{},"print-config":{},"import-config":{},"export-config":{},"sort-config":{remote:!0},data:e.dataList,"checkbox-config":{}},on:{"sort-change":e.sortChangeHandle}},[r("vxe-column",{attrs:{type:"seq",width:"40"}}),r("vxe-column",{attrs:{title:"操作菜单",field:"title",sortable:""}}),r("vxe-column",{attrs:{title:"耗时(毫秒)",field:"recordTime",sortable:""}}),r("vxe-column",{attrs:{title:"请求参数",field:"params",sortable:""}}),r("vxe-column",{attrs:{title:"返回结果",field:"result",sortable:""}}),r("vxe-column",{attrs:{title:"公司",field:"createBy.companyDTO.name","sort-by":"c.name",sortable:""}}),r("vxe-column",{attrs:{title:"部门",field:"createBy.officeDTO.name","sort-by":"o.name",sortable:""}}),r("vxe-column",{attrs:{title:"用户",field:"createBy.name","sort-by":"u.name",sortable:""}}),r("vxe-column",{attrs:{title:"IP地址",field:"remoteAddr",sortable:""}}),r("vxe-column",{attrs:{title:"访问时间",field:"createDate","sort-by":"a.create_date",sortable:""}})],1),r("vxe-pager",{attrs:{background:"",size:"small","current-page":e.tablePage.currentPage,"page-size":e.tablePage.pageSize,total:e.tablePage.total,"page-sizes":[10,20,100,1e3,{label:"全量数据",value:1e6}],layouts:["PrevPage","JumpNumber","NextPage","FullJump","Sizes","Total"]},on:{"page-change":e.currentChangeHandle}})],1)],1)],1)])},o=[],s=(r("b0c0"),r("9ebe")),l=r("2c81"),n={data:function(){var e=this,t=function(t,r,a){r!==e.pwdForm.newPassword?a(new Error("两次输入密码不一致!")):a()};return{type:"1",generalForm:{id:"",name:"",sign:"",companyDTO:{name:""},officeDTO:{name:""},remarks:""},concatForm:{id:"",email:"",phone:"",mobile:""},pwdForm:{id:"",oldPassword:"",newPassword:"",confirmNewPassword:""},photoForm:{id:"",photo:""},dataList:[],tablePage:{total:0,currentPage:1,pageSize:10,orders:[{column:"a.create_date",asc:!1}]},loading:!1,rule:[{required:!0,message:"必填项不能为空",trigger:"blur"},{validator:t,trigger:"blur"}]}},watch:{"$store.state.user.id":{handler:function(e){var t=this;e&&(s["a"].queryById(e).then((function(e){var r=e.data;t.recover(t.generalForm,r),t.recover(t.concatForm,r),t.recover(t.photoForm,r)})),this.refreshList())},immediate:!0,deep:!1}},methods:{submitGeneralForm:function(){var e=this;this.$refs["generalForm"].validate((function(t){if(t){var r=e.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});s["a"].saveInfo(e.generalForm).then((function(t){var a=t.data;r.close(),e.$store.commit("user/updateName",e.generalForm.name),e.$message.success(a)}))}}))},submitConcatForm:function(){var e=this;this.$refs["concatForm"].validate((function(t){if(t){var r=e.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});s["a"].saveInfo(e.concatForm).then((function(t){var a=t.data;e.$message.success(a),r.close()}))}}))},submitPwdForm:function(){var e=this;this.$refs["pwdForm"].validate((function(t){if(t){var r=e.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});s["a"].savePwd(e.pwdForm).then((function(t){var a=t.data;e.$message.success(a),r.close()})).catch((function(){r.close()}))}}))},submitPhotoForm:function(){var e=this;this.$refs["photoForm"].validate((function(t){if(t){var r=e.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});s["a"].saveInfo(e.photoForm).then((function(t){var a=t.data;e.$message.success(a),e.$store.commit("user/updatePhoto",e.photoForm.photo),r.close()})).catch((function(){r.close()}))}}))},refreshList:function(){var e=this;this.loading=!0,l["a"].mine({current:this.tablePage.currentPage,size:this.tablePage.pageSize,orders:this.tablePage.orders}).then((function(t){var r=t.data;e.dataList=r.records,e.tablePage.total=r.total,e.loading=!1}))},changeLog:function(e){this.type=e,this.refreshList()},currentChangeHandle:function(e){var t=e.currentPage,r=e.pageSize;this.tablePage.currentPage=t,this.tablePage.pageSize=r,this.refreshList()},sortChangeHandle:function(e){this.tablePage.orders=[],null!=e.order?this.tablePage.orders.push({column:e.column.sortBy||this.$utils.toLine(e.property),asc:"asc"===e.order}):this.tablePage.orders=[{column:"a.create_date",asc:!1}],this.refreshList()}}},i=n,m=r("2877"),c=Object(m["a"])(i,a,o,!1,null,null,null);t["default"]=c.exports}}]);