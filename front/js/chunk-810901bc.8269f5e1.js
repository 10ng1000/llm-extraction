(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-810901bc"],{1952:function(e,t,a){"use strict";var i=a("8f4d");t["a"]={save:function(e){return Object(i["a"])({url:"/form/make/save",method:"post",data:e})},saveFormSource:function(e){return Object(i["a"])({url:"/form/make/saveFormSource",method:"post",data:e})},saveBasicInfo:function(e){return Object(i["a"])({url:"/form/make/saveBasicInfo",method:"post",data:e})},delete:function(e){return Object(i["a"])({url:"/form/make/delete",method:"delete",params:{ids:e}})},queryById:function(e){return Object(i["a"])({url:"/form/make/queryById",method:"get",params:{id:e}})},getTableColumnList:function(e){return Object(i["a"])({url:"/form/make/getTableColumnList",method:"get",params:e})},getTableList:function(e){return Object(i["a"])({url:"/form/make/getTableList",method:"get",params:e})},list:function(e){return Object(i["a"])({url:"/form/make/list",method:"get",params:e})},validateTableNoExist:function(e){return Object(i["a"])({url:"/form/make/validateTableNoExist",method:"get",params:e})},validateKeyNoExist:function(e){return Object(i["a"])({url:"/form/make/validateKeyNoExist",method:"get",params:e})},createMenu:function(e){return Object(i["a"])({url:"/form/make/createMenu",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:e})}}},bad1:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.title,fullscreen:"","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"inputForm",class:"view"===e.method?"readonly":"",attrs:{size:"small",model:e.inputForm,disabled:"view"===e.method,"label-width":"120px"}},[e.visible?a("fm-making-form",{ref:"formDesign",staticStyle:{height:"700px"},attrs:{bindDataTable:"1"!==e.inputForm.autoCreate,data:e.options,uploadPath:this.$http.BASE_URL+"/file/upload?uploadPath=/formbuilder",preview:"",ds:e.inputForm.dataSource,tableName:e.inputForm.tableName,"tab-list":"","generate-json":"",clearable:""}}):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:function(t){e.visible=!1}}},[e._v("关闭")]),"view"!=e.method?a("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{size:"small",type:"primary",icon:"el-icon-circle-check"},on:{click:function(t){return e.doSubmit()}}},[e._v("确定")]):e._e()],1)],1)],1)},o=[],r=(a("b0c0"),a("1952")),n={data:function(){return{title:"",method:"",visible:!1,loading:!1,options:{},inputForm:{id:"",code:"",autoCreate:"1",dataSource:{id:"master",name:"本地数据库",enName:"master",type:""},name:"",tableName:"",source:"",version:"",remarks:""}}},components:{},methods:{init:function(e,t){var a=this;this.method=e,this.inputForm.id=t,"add"===e?this.title="新建数据表单":"edit"===e?this.title="修改数据表单":"view"===e&&(this.title="查看数据表单"),this.visible=!0,this.loading=!1,this.$nextTick((function(){a.inputForm.name="",a.inputForm.tableName="",a.inputForm.source="",a.inputForm.version="",a.inputForm.remarks="","edit"!==e&&"view"!==e||(a.loading=!0,r["a"].queryById(a.inputForm.id).then((function(e){var t=e.data;a.inputForm=a.recover(a.inputForm,t),a.inputForm.source&&(a.options=JSON.parse(a.inputForm.source),a.$refs.formDesign.setJSON(a.options)),a.loading=!1})))}))},handleSubmit:function(){},doSubmit:function(){var e=this;this.inputForm.source=JSON.stringify(this.$refs.formDesign.getJSON()),this.$refs["inputForm"].validate((function(t){t&&(e.loading=!0,r["a"].saveFormSource(e.inputForm).then((function(t){var a=t.data;e.visible=!1,e.$message.success(a),e.$emit("refreshDataList")})).catch((function(){e.loading=!1})))}))}}},s=n,l=a("2877"),u=Object(l["a"])(s,i,o,!1,null,null,null);t["default"]=u.exports}}]);