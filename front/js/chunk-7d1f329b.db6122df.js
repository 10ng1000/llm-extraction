(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d1f329b"],{"0df5":function(e,a,t){"use strict";var n=t("19f1"),i=t.n(n);i.a},"19f1":function(e,a,t){},9733:function(e,a,t){"use strict";t.r(a);var n,i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{"append-to-body":!0,"close-on-click-modal":!1,visible:e.visible,title:e.title,width:"80%"},on:{"update:visible":function(a){e.visible=a}}},[t("el-form",{ref:"searchForm",staticClass:"query-form",attrs:{size:"small",inline:!0,model:e.searchForm},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.refreshList()},submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{prop:"device_name"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择设备名称",size:"small"},model:{value:e.searchForm.device_name,callback:function(a){e.$set(e.searchForm,"device_name",a)},expression:"searchForm.device_name"}},e._l(e.allDeviceName,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{prop:"deviceName.id"}},[t("SelectTree",{ref:"deviceName",attrs:{props:{value:"id",label:"name",children:"children"},size:"small",url:"/devicemanage/deviceOrganization/treeData",clearable:!0,accordion:!0}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(a){return e.refreshList()}}},[e._v("查询")]),t("el-button",{attrs:{size:"small",icon:"el-icon-refresh-right"},on:{click:function(a){return e.resetSearch()}}},[e._v("重置")])],1)],1),t("div",{staticClass:"bg-white top",staticStyle:{height:"500px"}},[t("vxe-toolbar",{attrs:{refresh:{query:e.refreshList},export:"",print:"",custom:""},scopedSlots:e._u([{key:"buttons",fn:function(){return[e.hasPermission("parmanage:parManage:add")?t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(a){return e.add()}}},[e._v("新建")]):e._e(),e.hasPermission("parmanage:parManage:edit")?t("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-edit-outline",disabled:e.$refs.parManageTable&&1!==e.$refs.parManageTable.getCheckboxRecords().length,plain:""},on:{click:function(a){return e.edit()}}},[e._v("修改")]):e._e(),e.hasPermission("parmanage:parManage:del")?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",disabled:e.$refs.parManageTable&&0===e.$refs.parManageTable.getCheckboxRecords().length,plain:""},on:{click:function(a){return e.del()}}},[e._v("删除")]):e._e()]},proxy:!0}])}),t("div",{staticStyle:{height:"calc(100% - 80px)"}},[t("vxe-table",{ref:"parManageTable",attrs:{border:"inner","auto-resize":"",resizable:"",height:"550px",loading:e.loading,size:"small","show-header-overflow":"","show-overflow":"","highlight-hover-row":"","menu-config":{},"print-config":{},"import-config":{},"export-config":{},"sort-config":{remote:!0},data:e.dataList,"checkbox-config":{}},on:{"sort-change":e.sortChangeHandle}},[t("vxe-column",{attrs:{type:"seq",width:"40"}}),t("vxe-column",{attrs:{type:"checkbox",width:"40px"}}),t("vxe-column",{attrs:{field:"deviceName",sortable:"",title:"设备名称"}}),t("vxe-column",{attrs:{field:"deviceAddress",sortable:"",title:"设备地址"}}),t("vxe-column",{attrs:{field:"belongTo.name",sortable:"",title:"所属组织"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row.belongTo&&a.row.belongTo.name)+" ")]}}])}),t("vxe-column",{attrs:{field:"createTime",sortable:"",title:"设置时间"}}),t("vxe-column",{attrs:{fixed:"right",align:"center",title:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.hasPermission("parmanage:parManage:view")?t("el-button",{attrs:{type:"text",icon:"el-icon-view",size:"small"},on:{click:function(t){return e.view(a.row.id)}}},[e._v("查看")]):e._e(),e.hasPermission("parmanage:parManage:edit")?t("el-button",{attrs:{type:"text",icon:"el-icon-edit",size:"small"},on:{click:function(t){return e.edit(a.row.id)}}},[e._v("修改")]):e._e(),t("el-button",{attrs:{type:"text",icon:"el-icon-check",size:"small"},on:{click:function(t){return e.parSubmit(a.row.id)}}},[e._v("确定")])]}}])})],1),t("vxe-pager",{attrs:{background:"",size:"small","current-page":e.tablePage.currentPage,"page-size":e.tablePage.pageSize,total:e.tablePage.total,"page-sizes":[10,20,100,1e3,{label:"全量数据",value:1e6}],layouts:["PrevPage","JumpNumber","NextPage","FullJump","Sizes","Total"]},on:{"page-change":e.currentChangeHandle}})],1)],1),t("ParManageForm",{ref:"parManageForm",on:{refreshDataList:e.refreshList}}),t("DeviceAllocationForm",{ref:"deviceAllocationForm",on:{refreshTree:e.refreshTree}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(a){e.visible=!1}}},[e._v("关闭")])],1)],1)},r=[],o=(t("a4d3"),t("4de4"),t("4160"),t("c975"),t("a15b"),t("d81d"),t("a434"),t("b0c0"),t("e439"),t("dbb4"),t("b64b"),t("d3b7"),t("acd8"),t("159b"),t("2fa7")),c=(t("96cf"),t("c695"),t("bc3a")),s=t.n(c),u=t("fd68"),d=t("554d"),l=t("4d59"),p=t("5aa92"),h=t("bc2d"),v=t("7545"),m=t("6e9b");function f(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function g(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?f(Object(t),!0).forEach((function(a){Object(o["a"])(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var S=(n={name:"Batch",dataSave:"",score_success:"",data:function(){return{allDeviceName:["加载数据中"],filterText:"",deviceAllocationTreeData:[],selectDeviceAllocationName:"",dataList:[],tablePage:{total:0,currentPage:1,pageSize:10,orders:[]},loading:!1,dataReturn:"",isEdit:!0,title:"",visible:!1,value:"",shuoming:"",searchForm:{belongTo:{id:""},deviceName:""},zhuanInput:{a:"",b:"",c:"",d:""},par:[{nengji:"50%",te_ap_d:"",toeD:"",zhengfanum:"",tc_ap_d:"",tocD:"",lenningnum:"",tp_ap_u:"",paiqinum:"",dianliunum:""},{nengji:"75%",te_ap_d:"",toeD:"",zhengfanum:"",tc_ap_d:"",tocD:"",lenningnum:"",tp_ap_u:"",paiqinum:"",dianliunum:""},{nengji:"100%",te_ap_d:"",toeD:"",zhengfanum:"",tc_ap_d:"",tocD:"",lenningnum:"",tp_ap_u:"",paiqinum:"",dianliunum:""}]}},computed:{},components:{SelectTree:u["a"],ParManageForm:d["default"],DeviceAllocationForm:l["default"]},created:function(){this.parManageService=new p["a"],this.DeviceAllocationService=new h["a"],this.DeviceOrganizationService=new v["a"],this.healthConsultationService=new m["a"]},activated:function(){this.refreshTree(),this.refreshList(),this.getDevice()}},Object(o["a"])(n,"computed",{}),Object(o["a"])(n,"watch",{filterText:function(e){this.$refs.deviceAllocationTree.filter(e)}}),Object(o["a"])(n,"methods",{getDevice:function(){var e=this;this.healthConsultationService.getDeviceName().then((function(a){var t=a.data;e.allDeviceName=t}))},chongzhi:function(){},addColumn:function(){var e=this;this.$prompt("请输入列名","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(a){var t=a.value;e.dynamicColumns.push({prop:t,label:t})}))},deleteColunm:function(e){this.dynamicColumns.splice(e,1)},init:function(e){this.visible=!0,"canshe"&&(this.title="参数设定")},doSubmit:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=this.dataSave){e.next=3;break}return this.$message.error("未进行参数配置"),e.abrupt("return",0);case 3:return e.next=5,regeneratorRuntime.awrap(s.a.post("http://82.157.118.175:9002/calculator/",{device_name:this.dataSave.deviceName,te_ap_d_100:this.dataSave.teApD100,toeD_100:this.dataSave.toeD100,zhengfanum_100:this.dataSave.zhenFaNum100,tc_ap_d_100:this.dataSave.tcApd100,tocD_100:this.dataSave.tocD100,lengningnum_100:this.dataSave.lenNingNum100,tp_ap_u_100:this.dataSave.tpApU100,paiqinum_100:this.dataSave.paiQiNum100,dianliunum_100:this.dataSave.dianLiuNum100,te_ap_d_75:this.dataSave.teApd75,toeD_75:this.dataSave.toeD75,zhengfanum_75:this.dataSave.zhenFaNum75,tc_ap_d_75:this.dataSave.tcApd75,tocD_75:this.dataSave.tocD75,lengningnum_75:this.dataSave.lenNingNum75,tp_ap_u_75:this.dataSave.tpApU75,paiqinum_75:this.dataSave.paiQiNum75,dianliunum_75:this.dataSave.dianLiuNum75,te_ap_d_50:this.dataSave.teApD50,toeD_50:this.dataSave.toeD50,zhengfanum_50:this.dataSave.zhenFaNum50,tc_ap_d_50:this.dataSave.tcApd50,tocD_50:this.dataSave.tocD50,lengningnum_50:this.dataSave.lenNingNum50,tp_ap_u_50:this.dataSave.tpApu50,paiqinum_50:this.dataSave.paiQiNum50,dianliunum_50:this.dataSave.dianLiuNum50,a:parseFloat(this.dataSave.a),b:parseFloat(this.dataSave.b),c:parseFloat(this.dataSave.c),d:parseFloat(this.dataSave.d)}).then((function(e){e.data})));case 5:return this.visible=!1,e.abrupt("return",this.dataReturn);case 7:case"end":return e.stop()}}),null,this)},getScore:function(){var e=this;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:if(null!=this.dataSave){a.next=3;break}return this.$message.error("未进行参数配置"),a.abrupt("return",0);case 3:return a.next=5,regeneratorRuntime.awrap(s.a.post("http://82.157.118.175:9002/getScore/",{device_name:this.dataSave.deviceName}).then((function(a){var t=a.data;e.dataReturn=t})));case 5:return a.abrupt("return",this.dataReturn);case 6:case"end":return a.stop()}}),null,this)},getScoreName:function(e){var a=this;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(s.a.post("http://82.157.118.175:9002/getScore/",{device_name:e}).then((function(e){var t=e.data;a.dataReturn=t})));case 2:return t.abrupt("return",this.dataReturn);case 3:case"end":return t.stop()}}),null,this)},filterNode:function(e,a){return!e||-1!==a.name.indexOf(e)},refreshTree:function(){var e=this;this.DeviceOrganizationService.treeData().then((function(a){var t=a.data;e.deviceAllocationTreeData=t}))},addChildTreeNode:function(e){this.$refs.deviceAllocationForm.init("addChild",{id:"",parent:{id:e.id,name:e.name}})},addTreeNode:function(){this.$refs.deviceAllocationForm.init("add",{id:"",parent:{id:"",name:""}})},editTreeNode:function(e){this.$refs.deviceAllocationForm.init("edit",{id:e.id,parent:{id:"",name:""}})},refreshList:function(){var e=this;this.loading=!0,this.parManageService.list(g({current:this.tablePage.currentPage,size:this.tablePage.pageSize,orders:this.tablePage.orders},this.searchForm)).then((function(a){var t=a.data;e.dataList=t.records,e.tablePage.total=t.total,e.loading=!1}))},currentChangeHandle:function(e){var a=e.currentPage,t=e.pageSize;this.tablePage.currentPage=a,this.tablePage.pageSize=t,this.refreshList()},sortChangeHandle:function(e){this.tablePage.orders=[],null!=e.order&&this.tablePage.orders.push({column:this.$utils.toLine(e.property),asc:"asc"===e.order}),this.refreshList()},add:function(){this.$refs.parManageForm.init("add","")},edit:function(e){e=e||this.$refs.parManageTable.getCheckboxRecords().map((function(e){return e.id}))[0],this.$refs.parManageForm.init("edit",e)},view:function(e){this.$refs.parManageForm.init("view",e)},del:function(e){var a=this,t=e||this.$refs.parManageTable.getCheckboxRecords().map((function(e){return e.id})).join(",");this.$confirm("确定删除所选项吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.loading=!0,a.parManageService.delete(t).then((function(e){var t=e.data;a.$message.success(t),a.refreshList(),a.loading=!1}))}))},resetSearch:function(){this.searchForm={belongTo:{id:""},deviceName:""},this.filterText="",this.refreshList()},parSubmit:function(e){var a=this;this.$nextTick((function(){a.parManageService.queryById(e).then((function(e){var t=e.data;a.dataSave=t,a.par[0].te_ap_d=a.dataSave.teApD50,a.par[0].toeD=a.dataSave.toeD50,a.par[0].zhengfanum=a.dataSave.zhenFaNum50,a.par[0].tc_ap_d=a.dataSave.tcApd50,a.par[0].tocD=a.dataSave.tocD50,a.par[0].lenningnum=a.dataSave.lenNingNum50,a.par[0].tp_ap_u=a.dataSave.tpApu50,a.par[0].paiqinum=a.dataSave.paiQiNum50,a.par[0].dianliunum=a.dataSave.dianLiuNum50,a.par[1].te_ap_d=a.dataSave.teApd75,a.par[1].toeD=a.dataSave.toeD75,a.par[1].zhengfanum=a.dataSave.zhenFaNum75,a.par[1].tc_ap_d=a.dataSave.tcApd75,a.par[1].tocD=a.dataSave.tocD75,a.par[1].lenningnum=a.dataSave.lenNingNum75,a.par[1].tp_ap_u=a.dataSave.tpApU75,a.par[1].paiqinum=a.dataSave.paiQiNum75,a.par[1].dianliunum=a.dataSave.dianLiuNum75,a.par[2].te_ap_d=a.dataSave.teApD100,a.par[2].toeD=a.dataSave.toeD100,a.par[2].zhengfanum=a.dataSave.zhenFaNum100,a.par[2].tc_ap_d=a.dataSave.tcApd100,a.par[2].tocD=a.dataSave.tocD100,a.par[2].lenningnum=a.dataSave.lenNingNum100,a.par[2].tp_ap_u=a.dataSave.tpApU100,a.par[2].paiqinum=a.dataSave.paiQiNum100,a.par[2].dianliunum=a.dataSave.dianLiuNum100,a.zhuanInput.a=a.dataSave.a,a.zhuanInput.b=a.dataSave.b,a.zhuanInput.c=a.dataSave.c,a.zhuanInput.d=a.dataSave.d,a.$message.success("参数设定成功,可立即体检")}))}))},firstDo:function(){var e=this;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.parManageService.firstDo().then((function(a){var t=a.data;return e.dataSave=t,e.par[0].te_ap_d=e.dataSave.teApD50,e.par[0].toeD=e.dataSave.toeD50,e.par[0].zhengfanum=e.dataSave.zhenFaNum50,e.par[0].tc_ap_d=e.dataSave.tcApd50,e.par[0].tocD=e.dataSave.tocD50,e.par[0].lenningnum=e.dataSave.lenNingNum50,e.par[0].tp_ap_u=e.dataSave.tpApu50,e.par[0].paiqinum=e.dataSave.paiQiNum50,e.par[0].dianliunum=e.dataSave.dianLiuNum50,e.par[1].te_ap_d=e.dataSave.teApd75,e.par[1].toeD=e.dataSave.toeD75,e.par[1].zhengfanum=e.dataSave.zhenFaNum75,e.par[1].tc_ap_d=e.dataSave.tcApd75,e.par[1].tocD=e.dataSave.tocD75,e.par[1].lenningnum=e.dataSave.lenNingNum75,e.par[1].tp_ap_u=e.dataSave.tpApU75,e.par[1].paiqinum=e.dataSave.paiQiNum75,e.par[1].dianliunum=e.dataSave.dianLiuNum75,e.par[2].te_ap_d=e.dataSave.teApD100,e.par[2].toeD=e.dataSave.toeD100,e.par[2].zhengfanum=e.dataSave.zhenFaNum100,e.par[2].tc_ap_d=e.dataSave.tcApd100,e.par[2].tocD=e.dataSave.tocD100,e.par[2].lenningnum=e.dataSave.lenNingNum100,e.par[2].tp_ap_u=e.dataSave.tpApU100,e.par[2].paiqinum=e.dataSave.paiQiNum100,e.par[2].dianliunum=e.dataSave.dianLiuNum100,e.zhuanInput.a=e.dataSave.a,e.zhuanInput.b=e.dataSave.b,e.zhuanInput.c=e.dataSave.c,e.zhuanInput.d=e.dataSave.d,e.dataSave})));case 2:case"end":return a.stop()}}),null,this)}}),n),_=S,b=(t("0df5"),t("2877")),D=Object(b["a"])(_,i,r,!1,null,null,null);a["default"]=D.exports}}]);