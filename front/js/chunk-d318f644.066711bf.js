(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d318f644"],{"21bd":function(e,t,i){"use strict";var n=i("929c"),r=i.n(n);r.a},6198:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{center:"",title:e.inputForm.mailDTO.title,width:"70%","close-on-click-modal":!1,"append-to-body":"","before-close":e.handleClose,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{ref:"inputForm",attrs:{size:"small",model:e.inputForm}},[i("div",[i("span",[e._v("发件人："+e._s(e.inputForm.sender.name))]),i("el-divider"),i("span",[e._v("收件人："+e._s(e.inputForm.receiverNames))]),i("el-divider"),i("span",[e._v("时间："+e._s(e.inputForm.sendTime))]),i("el-divider"),i("el-card",[i("p",{domProps:{innerHTML:e._s(e.$utils.unescapeHTML(e.inputForm.mailDTO.content))}})])],1)]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger",icon:"el-icon-circle-close"},on:{click:function(t){return e.handleClose()}}},[e._v("关闭")])],1)],1)},r=[],a=i("326b"),s=i("27c2"),l=i("7193"),o={data:function(){return{method:"",content:"",editorOption:{},visible:!1,status:"",inputForm:{id:"",status:"",receiverIds:"",receiverNames:"",sendTime:"",mailDTO:{title:"",overview:"",content:""},sender:{name:""}}}},components:{UserSelect:a["a"],WangeEditor:s["a"]},methods:{init:function(e){var t=this;this.inputForm.id=e,this.visible=!0,this.$nextTick((function(){t.$refs["inputForm"].resetFields(),l["a"].queryById(t.inputForm.id).then((function(e){var i=e.data;t.inputForm=t.recover(t.inputForm,i)}))}))},handleClose:function(){this.visible=!1,this.$emit("refreshList")}}},c=o,d=i("2877"),u=Object(d["a"])(c,n,r,!1,null,null,null);t["default"]=u.exports},"6d26":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"jp-common-layout page"},[i("div",{staticClass:"jp-common-layout-left"},[i("div",{staticClass:"jp-common-title"},[i("el-button",{staticStyle:{width:"100%"},attrs:{size:"small",type:"primary"},on:{click:e.sendLetter}},[e._v("写信")])],1),i("div",{staticClass:"jp-common-el-tree-scrollbar el-scrollbar"},[i("div",{staticClass:"el-scrollbar__wrap"},[i("div",{staticClass:"el-scrollbar__view"},[i("el-menu",{staticStyle:{border:"0"},on:{select:e.select}},[i("el-menu-item-group",[i("template",{slot:"title"},[e._v("我的信箱")]),i("el-menu-item",{attrs:{index:"1"}},[e._v("收件箱 ("+e._s(" "+e.noReadCount)+"/"+e._s(e.mailBoxCount+" ")+")")]),i("el-menu-item",{attrs:{index:"2"}},[e._v("已发送 ("+e._s(" "+e.mailComposeCount+" ")+")")]),i("el-menu-item",{attrs:{index:"3"}},[e._v("草稿箱 ("+e._s(" "+e.mailDraftCount+" ")+")")]),i("el-menu-item",{attrs:{index:"4"}},[e._v("已删除 ("+e._s(" "+e.mailTrashCount+" ")+")")])],2)],1)],1)])])]),i("div",{staticClass:"jp-common-layout-center jp-flex-main"},[i("el-form",{ref:"searchForm",staticClass:"query-form",attrs:{size:"small",inline:!0,model:e.searchForm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshList()},submit:function(e){e.preventDefault()}}},[i("el-form-item",[i("el-dropdown",{on:{command:e.changeReadStatus}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v(" 过滤"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"0"}},[e._v("未读")]),i("el-dropdown-item",{attrs:{command:"1"}},[e._v("已读")]),i("el-dropdown-item",{attrs:{command:""}},[e._v("全部")])],1)],1)],1),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.refreshList}},[i("i",{staticClass:"el-icon-refresh"})]),i("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:function(t){return e.del()}}},[e._v("删除 ")])],1),i("el-form-item"),i("el-form-item",{staticClass:"pull-right"},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.searchForm.mailDTO.title,callback:function(t){e.$set(e.searchForm.mailDTO,"title",t)},expression:"searchForm.mailDTO.title"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.refreshList},slot:"append"})],1)],1)],1),i("div",{staticClass:"bg-white top"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",attrs:{data:e.dataList,size:"small",height:"calc(100% - 50px)"},on:{"selection-change":e.selectionChangeHandle,"sort-change":e.sortChangeHandle}},[i("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}),"2"===e.index||"3"===e.index||"4"===e.index?i("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.status?i("el-tag",{attrs:{type:"success"}},[e._v("已发送")]):e._e(),"0"===t.row.status?i("el-tag",{attrs:{type:"danger"}},[e._v("草稿")]):e._e(),"2"===t.row.status?i("el-tag",{attrs:{type:"danger"}},[e._v("未读")]):e._e(),"3"===t.row.status?i("el-tag",{attrs:{type:"success"}},[e._v("已读")]):e._e()]}}],null,!1,1837862968)}):e._e(),"1"===e.index?i("el-table-column",{attrs:{prop:"readStatus",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.readStatus?i("el-tag",{attrs:{type:"success"}},[e._v("已读")]):e._e(),"0"===t.row.readStatus?i("el-tag",{attrs:{type:"danger"}},[e._v("未读")]):e._e()]}}],null,!1,1458375605)}):e._e(),"1"===e.index||"4"===e.index?i("el-table-column",{attrs:{prop:"sender.name",label:"发件人"}}):e._e(),"1"!==e.index||"4"===e.index?i("el-table-column",{attrs:{prop:"receiverNames",label:"收件人"}}):e._e(),i("el-table-column",{attrs:{prop:"mailDTO.title","show-overflow-tooltip":"",label:"标题"}}),i("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"sendTime",label:"时间"}}),i("el-table-column",{attrs:{"header-align":"center",align:"center",width:"210",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-view"},on:{click:function(i){return e.view(t.row.id)}}},[e._v("查阅 ")]),"1"===e.index?i("el-button",{attrs:{type:"text",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return e.reply(t.row)}}},[e._v(" 回复 ")]):e._e(),i("el-button",{attrs:{type:"text",icon:"el-icon-delete",size:"mini"},on:{click:function(i){return e.del(t.row.id)}}},[e._v(" 删除 ")])]}}])})],1),i("el-pagination",{attrs:{"current-page":e.pageNo,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1),i("SendEmail",{ref:"sendEmail",on:{refreshList:e.refreshList}}),i("SentMailDetail",{ref:"sentMailDetail",on:{refreshList:e.refreshList}}),i("ReceivedMailDetail",{ref:"receivedMailDetail",on:{refreshList:e.refreshList}}),i("TrashMailDetail",{ref:"trashMailDetail",on:{refreshList:e.refreshList}})],1)])},r=[],a=(i("a4d3"),i("4de4"),i("4160"),i("a15b"),i("d81d"),i("b0c0"),i("e439"),i("dbb4"),i("b64b"),i("159b"),i("2fa7")),s=i("d071"),l=i("6198"),o=i("b91b"),c=i("f39e"),d=i("7193");function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var p={data:function(){return{searchForm:{mailDTO:{title:""},readStatus:""},dataList:[],pageNo:1,pageSize:10,total:0,index:"1",dataListSelections:[],dataUrl:"/mail/box/list",delUrl:"/mail/box/delete",loading:!1,noReadCount:0,mailBoxCount:0,mailComposeCount:0,mailDraftCount:0,mailTrashCount:0}},components:{SendEmail:s["default"],SentMailDetail:o["default"],ReceivedMailDetail:l["default"],TrashMailDetail:c["default"]},activated:function(){this.refreshList()},methods:{queryStatus:function(){var e=this;d["a"].queryStatus().then((function(t){var i=t.data;e.noReadCount=i.noReadCount,e.mailBoxCount=i.mailBoxCount,e.mailComposeCount=i.mailComposeCount,e.mailDraftCount=i.mailDraftCount,e.mailTrashCount=i.mailTrashCount}))},refreshList:function(){var e=this;this.loading=!0,this.queryStatus(),this.$http({url:this.dataUrl,method:"get",params:m({current:this.pageNo,size:this.pageSize},this.searchForm)}).then((function(t){var i=t.data;e.dataList=i.records,e.total=i.total,e.pageNo=i.current,e.loading=!1}))},sizeChangeHandle:function(e){this.pageSize=e,this.pageNo=1,this.refreshList()},currentChangeHandle:function(e){this.pageNo=e,this.refreshList()},selectionChangeHandle:function(e){this.dataListSelections=e},select:function(e){this.index=e,"1"===e?(this.dataUrl="/mail/box/list",this.delUrl="/mail/box/delete"):"2"===e?(this.dataUrl="/mail/compose/list?status=1",this.delUrl="/mail/compose/delete"):"3"===e?(this.dataUrl="/mail/compose/list?status=0",this.delUrl="/mail/compose/delete"):"4"===e&&(this.dataUrl="/mail/trash/list",this.delUrl="/mail/trash/delete"),this.refreshList()},sortChangeHandle:function(e){"ascending"===e.order?this.orderBy=e.prop+" asc":"descending"===e.order?this.orderBy=e.prop+" desc":this.orderBy="",this.refreshList()},changeReadStatus:function(e){this.searchForm.readStatus=e,this.refreshList()},sendLetter:function(){this.$refs.sendEmail.init("add","")},view:function(e){"1"===this.index?this.$refs.receivedMailDetail.init(e):"2"===this.index?this.$refs.sentMailDetail.init(e):"3"===this.index?this.$refs.sendEmail.init("edit",e):"4"===this.index&&this.$refs.trashMailDetail.init(e)},reply:function(e){var t="<br/><br/><br/>------------------ 原始邮件 ------------------<br/>发件人:".concat(e.sender.name,"<br/>")+"发送时间:".concat(e.sendTime,"<br/>")+"收件人:".concat(e.receiverNames,"<br/>")+"主题:".concat(e.mailDTO.title,"<br/>")+this.$utils.unescapeHTML(e.mailDTO.content),i={sender:{id:e.sender.id},title:"回复:"+e.mailDTO.title,content:t};this.$refs.sendEmail.init("reply",i)},del:function(e){var t=this,i=e||this.dataListSelections.map((function(e){return e.id})).join(",");i?this.$confirm("确定删除所选项吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.delete(t.delUrl,{params:{ids:i}}).then((function(e){var i=e.data;t.$message.success({dangerouslyUseHTMLString:!0,message:i}),t.refreshList()}))})):this.$message.error("请选择你要删除的邮件!")},resetSearch:function(){this.$refs.searchForm.resetFields(),this.refreshList()}}},h=p,f=(i("21bd"),i("2877")),v=Object(f["a"])(h,n,r,!1,null,null,null);t["default"]=v.exports},7193:function(e,t,i){"use strict";var n=i("8f4d");t["a"]={delete:function(e){return Object(n["a"])({url:"/mail/box/delete",method:"delete",params:{ids:e}})},queryById:function(e){return Object(n["a"])({url:"/mail/box/queryById",method:"get",params:{id:e}})},queryStatus:function(){return Object(n["a"])({url:"/mail/box/queryStatus",method:"get"})},list:function(e){return Object(n["a"])({url:"/mail/box/list",method:"get",params:e})}}},"929c":function(e,t,i){},b91b:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.inputForm.mailDTO.title,width:"70%",center:"","close-on-click-modal":!1,"before-close":e.handleClose,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{ref:"inputForm",attrs:{size:"small",model:e.inputForm}},[i("div",[i("span",[e._v("发件人：本人")]),i("el-divider"),i("span",[e._v("收件人："+e._s(e.inputForm.receiverNames))]),i("el-divider"),i("span",[e._v("时间："+e._s(e.inputForm.sendTime))]),i("el-divider"),i("el-card",{staticClass:"box-card"},[i("p",{domProps:{innerHTML:e._s(e.$utils.unescapeHTML(e.inputForm.mailDTO.content))}})])],1)]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger",icon:"el-icon-circle-close"},on:{click:function(t){return e.handleClose()}}},[e._v("关闭")])],1)],1)},r=[],a=i("326b"),s=i("27c2"),l=i("3592"),o={data:function(){return{method:"",content:"",editorOption:{},visible:!1,status:"",inputForm:{id:"",status:"",receiverIds:"",receiverNames:"",sendTime:"",mailDTO:{title:"",overview:"",content:""},sender:{name:""}}}},components:{UserSelect:a["a"],WangeEditor:s["a"]},methods:{init:function(e){var t=this;this.inputForm.id=e,this.visible=!0,this.$nextTick((function(){t.$refs["inputForm"].resetFields(),l["a"].queryById(t.inputForm.id).then((function(e){var i=e.data;t.inputForm=t.recover(t.inputForm,i)}))}))},handleClose:function(){this.visible=!1,this.$emit("refreshList")}}},c=o,d=i("2877"),u=Object(d["a"])(c,n,r,!1,null,null,null);t["default"]=u.exports},f39e:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{center:"",title:e.inputForm.mailDTO.title,width:"70%","close-on-click-modal":!1,"append-to-body":"","before-close":e.handleClose,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{ref:"inputForm",attrs:{size:"small",model:e.inputForm}},[i("div",[i("span",[e._v("发件人："+e._s(e.inputForm.sender.name))]),i("el-divider"),i("span",[e._v("收件人："+e._s(e.inputForm.receiverNames))]),i("el-divider"),i("span",[e._v("时间："+e._s(e.inputForm.sendTime))]),i("el-divider"),i("el-card",[i("p",{domProps:{innerHTML:e._s(e.$utils.unescapeHTML(e.inputForm.mailDTO.content))}})])],1)]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger",icon:"el-icon-circle-close"},on:{click:function(t){return e.handleClose()}}},[e._v("关闭")])],1)],1)},r=[],a=i("326b"),s=i("27c2"),l=i("8f4d"),o={delete:function(e){return Object(l["a"])({url:"/mail/trash/delete",method:"delete",params:{ids:e}})},queryById:function(e){return Object(l["a"])({url:"/mail/trash/queryById",method:"get",params:{id:e}})},list:function(e){return Object(l["a"])({url:"/mail/trash/list",method:"get",params:e})}},c={data:function(){return{method:"",content:"",editorOption:{},visible:!1,status:"",inputForm:{id:"",status:"",receiverIds:"",receiverNames:"",sendTime:"",mailDTO:{title:"",overview:"",content:""},sender:{name:""}}}},components:{UserSelect:a["a"],WangeEditor:s["a"]},methods:{init:function(e){var t=this;this.inputForm.id=e,this.visible=!0,this.$nextTick((function(){t.$refs["inputForm"].resetFields(),o.queryById(t.inputForm.id).then((function(e){var i=e.data;t.inputForm=t.recover(t.inputForm,i)}))}))},handleClose:function(){this.visible=!1,this.$emit("refreshList")}}},d=c,u=i("2877"),m=Object(u["a"])(d,n,r,!1,null,null,null);t["default"]=m.exports}}]);