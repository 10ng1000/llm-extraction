(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b4bbfae","chunk-459b8f16","chunk-7fc46418"],{"0ccb":function(e,t,n){var o=n("e330"),r=n("50c4"),i=n("577e"),a=n("1148"),s=n("1d80"),l=o(a),d=o("".slice),c=Math.ceil,u=function(e){return function(t,n,o){var a,u,f=i(s(t)),p=r(n),g=f.length,h=void 0===o?" ":i(o);return p<=g||""==h?f:(a=p-g,u=l(h,c(a/h.length)),u.length>a&&(u=d(u,0,a)),e?f+u:u+f)}};e.exports={start:u(!1),end:u(!0)}},3996:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("9f12"),r=n("53fe"),i=n("8f4d"),a=function(){function e(){Object(o["a"])(this,e)}return Object(r["a"])(e,[{key:"save",value:function(e){return Object(i["a"])({url:"/knowledgeprofessionqa/knowledgeProfessionQa/save",method:"post",data:e})}},{key:"delete",value:function(e){return Object(i["a"])({url:"/knowledgeprofessionqa/knowledgeProfessionQa/delete",method:"delete",params:{ids:e}})}},{key:"queryById",value:function(e){return Object(i["a"])({url:"/knowledgeprofessionqa/knowledgeProfessionQa/queryById",method:"get",params:{id:e}})}},{key:"list",value:function(e){return Object(i["a"])({url:"/knowledgeprofessionqa/knowledgeProfessionQa/list",method:"get",params:e})}}]),e}()},"4d90":function(e,t,n){"use strict";var o=n("23e7"),r=n("0ccb").start,i=n("9a0c");o({target:"String",proto:!0,forced:i},{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},"53fe":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("85d3"),r=n.n(o);function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),r()(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}},"9a0c":function(e,t,n){var o=n("342f");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(o)},"9f12":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return o}))},e0dc:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("el-form",{ref:"searchForm",staticClass:"query-form",attrs:{size:"small",inline:!0,model:e.searchForm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshList()},submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{prop:"question"}},[n("el-input",{attrs:{size:"small",placeholder:"问题",clearable:""},model:{value:e.searchForm.question,callback:function(t){e.$set(e.searchForm,"question",t)},expression:"searchForm.question"}})],1),n("el-form-item",{attrs:{prop:"answer"}},[n("el-input",{attrs:{size:"small",placeholder:"回答",clearable:""},model:{value:e.searchForm.answer,callback:function(t){e.$set(e.searchForm,"answer",t)},expression:"searchForm.answer"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(t){return e.refreshList()}}},[e._v("查询")]),n("el-button",{attrs:{size:"small",icon:"el-icon-refresh-right"},on:{click:function(t){return e.resetSearch()}}},[e._v("重置")])],1)],1),n("div",{staticClass:"bg-white top"},[n("vxe-toolbar",{attrs:{refresh:{query:e.refreshList}},scopedSlots:e._u([{key:"buttons",fn:function(){return[e.hasPermission("knowledgeprofessionqa:knowledgeProfessionQa:add")?n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.add()}}},[e._v("新建")]):e._e()]},proxy:!0}])}),n("div",{staticStyle:{height:"calc(100% - 80px)"}},[n("vxe-table",{ref:"knowledgeProfessionQaTable",attrs:{border:"inner","auto-resize":"",resizable:"",height:"auto",loading:e.loading,size:"small","show-header-overflow":"","show-overflow":"","highlight-hover-row":"","menu-config":{},"print-config":{},"import-config":{},"export-config":{},"sort-config":{remote:!0},data:e.dataList,"checkbox-config":{}},on:{"sort-change":e.sortChangeHandle}},[n("vxe-column",{attrs:{type:"seq",width:"40"}}),n("vxe-column",{attrs:{type:"checkbox",width:"40px"}}),n("vxe-column",{attrs:{field:"textId",sortable:"",title:"文本向量id"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("knowledgeprofessionqa:knowledgeProfessionQa:edit")?n("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(n){return e.edit(t.row.id)}}},[e._v(e._s(t.row.textId))]):e.hasPermission("knowledgeprofessionqa:knowledgeProfessionQa:view")?n("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(n){return e.view(t.row.id)}}},[e._v(e._s(t.row.textId))]):n("span",[e._v(e._s(t.row.textId))])]}}])}),n("vxe-column",{attrs:{field:"question",sortable:"",title:"问题"}}),n("vxe-column",{attrs:{field:"answer",sortable:"",title:"回答"}}),n("vxe-column",{attrs:{fixed:"right",align:"center",width:"200",title:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("knowledgeprofessionqa:knowledgeProfessionQa:view")?n("el-button",{attrs:{type:"text",icon:"el-icon-view",size:"small"},on:{click:function(n){return e.view(t.row.id)}}},[e._v("查看")]):e._e(),e.hasPermission("knowledgeprofessionqa:knowledgeProfessionQa:edit")?n("el-button",{attrs:{type:"text",icon:"el-icon-edit",size:"small"},on:{click:function(n){return e.edit(t.row.id)}}},[e._v("编辑")]):e._e(),e.hasPermission("knowledgeprofessionqa:knowledgeProfessionQa:del")?n("el-button",{attrs:{type:"text",icon:"el-icon-delete",size:"small"},on:{click:function(n){return e.del(t.row.id,t.row.textId,t.row.databaseId)}}},[e._v("删除")]):e._e()]}}])})],1),n("vxe-pager",{attrs:{background:"",size:"small","current-page":e.tablePage.currentPage,"page-size":e.tablePage.pageSize,total:e.tablePage.total,"page-sizes":[10,20,100,1e3,{label:"全量数据",value:1e6}],layouts:["PrevPage","JumpNumber","NextPage","FullJump","Sizes","Total"]},on:{"page-change":e.currentChangeHandle}})],1)],1),n("KnowledgeProfessionQaForm",{ref:"knowledgeProfessionQaForm",on:{refreshDataList:e.refreshList}})],1)},r=[],i=(n("a4d3"),n("4de4"),n("4160"),n("a15b"),n("d81d"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("2fa7")),a=n("fd14"),s=n("3996");n("bc3a");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={data:function(){return{searchForm:{question:"",answer:"",databaseId:"",categories:""},dataList:[],tablePage:{total:0,currentPage:1,pageSize:10,orders:[]},loading:!1}},components:{KnowledgeProfessionQaForm:a["default"]},knowledgeProfessionQaService:null,created:function(){this.knowledgeProfessionQaService=new s["a"]},activated:function(){this.refreshList()},methods:{refreshList:function(){var e=this;this.loading=!0,this.knowledgeProfessionQaService.list(d({current:this.tablePage.currentPage,size:this.tablePage.pageSize,orders:this.tablePage.orders},this.searchForm)).then((function(t){var n=t.data;e.dataList=n.records,e.tablePage.total=n.total,e.loading=!1}))},currentChangeHandle:function(e){var t=e.currentPage,n=e.pageSize;this.tablePage.currentPage=t,this.tablePage.pageSize=n,this.refreshList()},sortChangeHandle:function(e){this.tablePage.orders=[],null!=e.order&&this.tablePage.orders.push({column:this.$utils.toLine(e.property),asc:"asc"===e.order}),this.refreshList()},add:function(){this.$refs.knowledgeProfessionQaForm.init("add","")},edit:function(e){e=e||this.$refs.knowledgeProfessionQaTable.getCheckboxRecords().map((function(e){return e.id}))[0],this.$refs.knowledgeProfessionQaForm.init("edit",e)},view:function(e){this.$refs.knowledgeProfessionQaForm.init("view",e)},del:function(e,t,n){var o=this,r=e||this.$refs.knowledgeProfessionQaTable.getCheckboxRecords().map((function(e){return e.id})).join(","),i=t||this.$refs.knowledgeProfessionQaTable.getCheckboxRecords().map((function(e){return e.textId})).join(","),a=n||this.$refs.knowledgeProfessionQaTable.getCheckboxRecords().map((function(e){return e.databaseId})).join(",");this.$confirm("确定删除所选项吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=new XMLHttpRequest;e.open("POST","http://82.157.118.175:43360/knowledge_base/delete_docs"),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send('{"knowledge_base_name": "'+a+'", "file_names": ["'+i+'.txt"], "delete_content": "'+!0+'", "not_refresh_vs_cache":"'+!1+'"}'),e.onload=function(e){var t=JSON.parse(e.target.response);200==t.code?(o.loading=!0,o.knowledgeProfessionQaService.delete(r).then((function(e){var t=e.data;o.$message.success(t),o.refreshList(),o.loading=!1}))):console.log(t)}}))},resetSearch:function(){this.$refs.searchForm.resetFields(),this.refreshList()}}},u=c,f=n("2877"),p=Object(f["a"])(u,o,r,!1,null,null,null);t["default"]=p.exports},fd14:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.title,"close-on-click-modal":!1,width:"1000px",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"inputForm",class:"view"===e.method?"readonly":"",attrs:{model:e.inputForm,size:"small",disabled:"view"===e.method,"label-width":"120px"}},[n("el-row",{directives:[{name:"show",rawName:"v-show",value:!e.rowHidden,expression:"!rowHidden"}]},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"文本向量id",prop:"textId"}},[n("el-input",{attrs:{placeholder:"请填写文本向量id",readonly:"",disabled:!0},model:{value:e.inputForm.textId,callback:function(t){e.$set(e.inputForm,"textId",t)},expression:"inputForm.textId"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"问题",prop:"question",rules:[{required:!0,message:"问题不能为空",trigger:"blur"}]}},[n("el-input",{attrs:{placeholder:"请填写问题"},model:{value:e.inputForm.question,callback:function(t){e.$set(e.inputForm,"question",t)},expression:"inputForm.question"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"回答",prop:"answer",rules:[{required:!0,message:"回答不能为空",trigger:"blur"}]}},[n("WangEditor",{ref:"contents1Editor",attrs:{disabled:e.disabled},model:{value:e.inputForm.answer,callback:function(t){e.$set(e.inputForm,"answer",t)},expression:"inputForm.answer"}})],1)],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible=!1}}},[e._v("关闭")]),"view"!=e.method?n("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{size:"small",type:"primary"},on:{click:function(t){return e.doSubmit()}}},[e._v("确定")]):e._e()],1)],1)],1)},r=[],i=(n("0d03"),n("d3b7"),n("25f0"),n("4d90"),n("3996")),a=n("27c2"),s={data:function(){return{rowHidden:!1,title:"",method:"",visible:!1,loading:!1,inputForm:{id:"",textId:"",question:"",answer:"",databaseId:"",categories:""},databaseName:"bingshan",disabled:!0}},mounted:function(){var e=1,t="bingshan";""===this.inputForm.databaseId&&(this.inputForm.databaseId=t),""===this.inputForm.categories&&(this.inputForm.categories=e)},components:{WangEditor:a["a"]},knowledgeProfessionQaService:null,created:function(){this.knowledgeProfessionQaService=new i["a"]},methods:{init:function(e,t){var n=this;this.method=e,this.inputForm.id=t,"add"===e?(this.title="新建专家知识问答对",this.rowHidden=!0):"edit"===e?(this.title="修改专家知识问答对",this.rowHidden=!1):"view"===e&&(this.title="查看专家知识问答对",this.rowHidden=!1),this.visible=!0,this.loading=!1,this.disabled=!1,this.$nextTick((function(){n.$refs.inputForm.resetFields(),"edit"!==e&&"view"!==e||(n.loading=!0,n.knowledgeProfessionQaService.queryById(n.inputForm.id).then((function(t){var o=t.data;n.inputForm=n.recover(n.inputForm,o),n.disabled="view"===e,n.$refs.contents1Editor.init(n.inputForm.answer),n.loading=!1})))}))},init_without_show:function(e,t){this.method=e,this.inputForm.id=t,"add"===e?(this.title="新建专家知识问答对",this.rowHidden=!0):"edit"===e?(this.title="修改专家知识问答对",this.rowHidden=!1):"view"===e&&(this.title="查看专家知识问答对",this.rowHidden=!1)},edit_content:function(e,t){var n=this;this.$set(this.inputForm,"question",e),this.disabled=!1,this.$nextTick((function(){n.$refs.contents1Editor.init(t)}))},show:function(){this.visible=!0},doSubmit:function(){var e=this;this.$refs["inputForm"].validate((function(t){if(t){var n=new Date;if(""===e.inputForm.textId){var o=n.getFullYear(),r=(n.getMonth()+1).toString().padStart(2,"0"),i=n.getDate().toString().padStart(2,"0"),a=n.getHours().toString().padStart(2,"0"),s=n.getMinutes().toString().padStart(2,"0"),l=n.getSeconds().toString().padStart(2,"0");e.inputForm.textId=o+r+i+a+s+l}var d=new XMLHttpRequest,c=e.inputForm,u=c.question,f=c.answer,p=c.textId;c.databaseId;d.open("POST","http://82.157.118.175:43360/knowledge_base/upload_text"),d.setRequestHeader("Content-Type","application/json;charset=UTF-8");var g={question:u,answer:f,doc_name:p+".txt",knowledge_base_name:e.databaseName};d.send(JSON.stringify(g)),d.onload=function(t){var n=JSON.parse(t.target.response);200==n.code&&(e.loading=!0,e.knowledgeProfessionQaService.save(e.inputForm).then((function(t){var n=t.data;e.visible=!1,e.$message.success(n),e.$emit("refreshDataList"),e.loading=!1})).catch((function(){e.loading=!1})))}}}))},add:function(e,t,n){var o=this,r=new Date,i=r.getFullYear(),a=(r.getMonth()+1).toString().padStart(2,"0"),s=r.getDate().toString().padStart(2,"0"),l=r.getHours().toString().padStart(2,"0"),d=r.getMinutes().toString().padStart(2,"0"),c=r.getSeconds().toString().padStart(2,"0"),u=i+a+s+l+d+c,f=new XMLHttpRequest;f.open("POST","http://82.157.118.175:43360/knowledge_base/upload_text"),f.setRequestHeader("Content-Type","application/json;charset=UTF-8");var p={question:e,answer:t,doc_name:u+".txt",knowledge_base_name:this.databaseName};f.send(JSON.stringify(p)),f.onload=function(r){var i=JSON.parse(r.target.response);200==i.code&&(o.loading=!0,o.knowledgeProfessionQaService.save({textId:u,question:e,answer:t,databaseId:o.databaseName,id:"",categories:1}).then((function(e){var t=e.data;n.$message.success(t)})).catch((function(){})))}}}},l=s,d=n("2877"),c=Object(d["a"])(l,o,r,!1,null,null,null);t["default"]=c.exports}}]);