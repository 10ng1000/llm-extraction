(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d1f0eee","chunk-6e500208","chunk-09e8e0a1","chunk-78e746f4"],{"307a8":function(e,t,i){},"498a":function(e,t,i){"use strict";var n=i("23e7"),r=i("58a8").trim,a=i("c8d2");n({target:"String",proto:!0,forced:a("trim")},{trim:function(){return r(this)}})},"54d8":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.title,"append-to-body":!0,"close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"inputForm",class:"view"===e.method?"readonly":"",attrs:{size:"small",model:e.inputForm,disabled:"view"===e.method,"label-width":"120px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSubmit()},submit:function(e){e.preventDefault()}}},[i("el-form-item",{attrs:{label:"数据规则名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"数据规则名称"},model:{value:e.inputForm.name,callback:function(t){e.$set(e.inputForm,"name",t)},expression:"inputForm.name"}})],1),i("el-form-item",{attrs:{label:"规则mapper方法",prop:"className"}},[i("el-input",{attrs:{placeholder:"规则mapper方法"},model:{value:e.inputForm.className,callback:function(t){e.$set(e.inputForm,"className",t)},expression:"inputForm.className"}}),i("div",{staticClass:"help-block"},[e._v("请输入要进行数据权限过滤的的mapper方法（例如: com.jeeplus.xxx.xxMapper.findList)。")])],1),i("el-form-item",{attrs:{label:"规则字段",prop:"field"}},[i("el-input",{attrs:{placeholder:"规则字段"},model:{value:e.inputForm.field,callback:function(t){e.$set(e.inputForm,"field",t)},expression:"inputForm.field"}})],1),i("el-form-item",{attrs:{label:"规则条件",prop:"express"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"规则条件"},model:{value:e.inputForm.express,callback:function(t){e.$set(e.inputForm,"express",t)},expression:"inputForm.express"}},e._l(e.$dictUtils.getDictList("t_express"),(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"规则值",prop:"value"}},[i("el-autocomplete",{staticStyle:{width:"100%"},attrs:{clearable:"","fetch-suggestions":e.querySearch,placeholder:"请输入规则值"},model:{value:e.inputForm.value,callback:function(t){e.$set(e.inputForm,"value",t)},expression:"inputForm.value"}})],1),i("el-form-item",{attrs:{label:"自定义sql",prop:"sqlSegment"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"备注"},model:{value:e.inputForm.sqlSegment,callback:function(t){e.$set(e.inputForm,"sqlSegment",t)},expression:"inputForm.sqlSegment"}})],1),i("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"备注"},model:{value:e.inputForm.remarks,callback:function(t){e.$set(e.inputForm,"remarks",t)},expression:"inputForm.remarks"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:function(t){e.visible=!1}}},[e._v("关闭")]),"view"!=e.method?i("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{size:"small",type:"primary",icon:"el-icon-circle-check"},on:{click:function(t){return e.doSubmit()}}},[e._v("确定")]):e._e()],1)],1)},r=[],a=i("b808"),o={data:function(){return{visible:!1,loading:!1,method:"",title:"",inputForm:{id:"",menuId:"",name:"",className:"",field:"",express:"",value:"",sqlSegment:"",remarks:""}}},methods:{init:function(e,t){var i=this;this.method=e,this.inputForm.id=t.id,this.inputForm.menuId=t.menuId,"add"===e?this.title="新增数据规则":"edit"===e?this.title="修改数据规则":"view"===e&&(this.title="查看数据规则"),this.visible=!0,this.$nextTick((function(){i.$refs["inputForm"].resetFields(),"edit"!==e&&"view"!==e||a["a"].queryById(i.inputForm.id).then((function(e){var t=e.data;i.inputForm=i.recover(i.inputForm,t)}))}))},querySearch:function(e,t){var i=[{title:"当前登录用户姓名",value:"@currentUser.name"},{title:"当前登录用户id",value:"@currentUser.id"},{title:"当前登录用户登录名",value:"@currentUser.loginName"},{title:"当前登录用户工号",value:"@currentUser.no"},{title:"当前登录用户所属公司",value:"@currentUser.companyDTO.name"},{title:"当前登录用户所属公司id",value:"@currentUser.companyDTO.id"},{title:"当前登录用户所属部门",value:"@currentUser.officeDTO.name"},{title:"当前登录用户所属部门id",value:"@currentUser.officeDTO.id"}];t(i)},doSubmit:function(){var e=this;this.$refs["inputForm"].validate((function(t){t&&(e.loading=!0,a["a"].save(e.inputForm).then((function(t){var i=t.data;e.loading=!1,e.$message({message:i,type:"success",duration:1500}),e.visible=!1,e.$emit("refreshDataList",e.inputForm.menuId)})).catch((function(){e.loading=!1})))}))}}},s=o,l=i("2877"),u=Object(l["a"])(s,n,r,!1,null,null,null);t["default"]=u.exports},5935:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page"},[i("div",{staticClass:"bg-white top"},[i("vxe-toolbar",{attrs:{refresh:{query:e.refreshList},custom:""},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.add()}}},[e._v("新建")])]},proxy:!0}])}),i("div",{staticStyle:{height:"calc(100% - 100px)"}},[i("vxe-table",{ref:"roleTable",attrs:{border:"inner","auto-resize":"",resizable:"",height:"auto",loading:e.loading,size:"small","show-header-overflow":"","show-overflow":"","highlight-hover-row":"","menu-config":{},"print-config":{},"import-config":{},"export-config":{},"sort-config":{remote:!1},data:e.dataList,"checkbox-config":{}}},[i("vxe-column",{attrs:{type:"seq",width:"40"}}),i("vxe-column",{attrs:{width:"160px",title:"数据规则名称",field:"name",sortable:""}}),i("vxe-column",{attrs:{width:"160px",title:"规则mapper方法",field:"className",sortable:""}}),i("vxe-column",{attrs:{width:"160px",title:"规则字段",field:"field",sortable:""}}),i("vxe-column",{attrs:{width:"160px",title:"规则条件",field:"express",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.$dictUtils.getDictLabel("t_express",t.row.express,""))+" ")]}}])}),i("vxe-column",{attrs:{width:"160px",title:"规则值",field:"value",sortable:""}}),i("vxe-column",{attrs:{width:"160px",title:"自定义SQL",field:"sqlSegment",sortable:""}}),i("vxe-column",{attrs:{width:"160px",title:"备注信息",field:"remarks",sortable:""}}),i("vxe-column",{attrs:{width:"160px",title:"规则值",field:"value",sortable:""}}),i("vxe-column",{attrs:{title:"操作",width:"160px",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.edit(t.row.id)}}},[e._v("修改")]),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.del(t.row.id)}}},[e._v(" 删除 ")])]}}])})],1)],1),i("data-rule-form",{ref:"dataRuleForm",on:{refreshDataList:e.refreshList}})],1)])},r=[],a=i("54d8"),o=i("b808"),s={data:function(){return{dataList:[],loading:!1,menuId:"",title:""}},props:["dataRuleTitle"],components:{DataRuleForm:a["default"]},activated:function(){this.refreshList(this.menuId)},methods:{refreshList:function(e){var t=this;e&&(this.menuId=e),this.loading=!0,o["a"].list({current:1,size:-1,menuId:this.menuId}).then((function(e){var i=e.data;t.dataList=i.records,t.loading=!1}))},add:function(){this.$refs.dataRuleForm.init("add",{id:"",menuId:this.menuId})},edit:function(e){this.$refs.dataRuleForm.init("edit",{id:e,menuId:this.menuId})},view:function(e){this.$refs.dataRuleForm.init("view",{id:e,menuId:this.menuId})},sortChangeHandle:function(e){this.tablePage.orders=[],this.tablePage.orders.push({column:this.$utils.toLine(e.property),asc:"asc"===e.order}),this.refreshList()},del:function(e){var t=this;this.$confirm("确定删除该条记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,o["a"].delete(e).then((function(e){var i=e.data;t.loading=!1,t.$message.success(i),t.refreshList(t.menuId)}))}))}}},l=s,u=i("2877"),c=Object(u["a"])(l,n,r,!1,null,null,null);t["default"]=c.exports},7224:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.title+e.typeList[e.inputForm.type],"close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"inputForm",class:"view"===e.method?"readonly":"",attrs:{size:"small",model:e.inputForm,disabled:"view"===e.method,rules:e.dataRule,"label-width":"100px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSubmit()},submit:function(e){e.preventDefault()}}},[i("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[i("el-radio-group",{model:{value:e.inputForm.type,callback:function(t){e.$set(e.inputForm,"type",t)},expression:"inputForm.type"}},e._l(e.typeList,(function(t,n){return i("el-radio",{key:n,attrs:{label:n.toString()}},[e._v(e._s(t))])})),1)],1),i("el-form-item",{attrs:{label:"上级菜单",prop:"parent.id"}},[i("SelectTree",{ref:"menuParentTree",attrs:{props:{value:"id",label:"name",children:"children"},data:e.menuList,value:e.inputForm.parent.id,clearable:!0,accordion:!0},on:{getValue:function(t){e.inputForm.parent.id=t}}})],1),i("el-form-item",{attrs:{label:e.typeList[e.inputForm.type]+"名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"50",placeholder:e.typeList[e.inputForm.type]+"名称"},model:{value:e.inputForm.name,callback:function(t){e.$set(e.inputForm,"name",t)},expression:"inputForm.name"}})],1),"1"===e.inputForm.type||"2"===e.inputForm.type||"3"===e.inputForm.type?i("el-form-item",{attrs:{label:"链接地址",prop:"href"}},[i("el-input",{attrs:{maxlength:"1000",placeholder:"请填写路由路径或者超链接"},model:{value:e.inputForm.href,callback:function(t){e.$set(e.inputForm,"href",t)},expression:"inputForm.href"}})],1):e._e(),"1"===e.inputForm.type||"2"===e.inputForm.type||"3"===e.inputForm.type?i("el-form-item",{attrs:{label:"链接类型",prop:"target"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"如果是路由路径请留空白，http链接或者外部链接请选择iframe",clearable:""},model:{value:e.inputForm.target,callback:function(t){e.$set(e.inputForm,"target",t)},expression:"inputForm.target"}},e._l([{label:"iframe",value:"iframe"}],(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"2"!==e.inputForm.type&&"3"!==e.inputForm.type?i("el-form-item",{attrs:{label:"菜单图标",prop:"icon"}},[i("el-input",{attrs:{clearable:"",placeholder:"菜单图标名称"},on:{focus:e.selectIcon},model:{value:e.inputForm.icon,callback:function(t){e.$set(e.inputForm,"icon",t)},expression:"inputForm.icon"}})],1):e._e(),"2"!==e.inputForm.type&&"3"!==e.inputForm.type?i("el-form-item",{attrs:{label:"可见",prop:"isShow"}},[i("el-radio-group",{model:{value:e.inputForm.isShow,callback:function(t){e.$set(e.inputForm,"isShow",t)},expression:"inputForm.isShow"}},e._l(e.$dictUtils.getDictList("show_hide"),(function(t){return i("el-radio",{key:t.id,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1):e._e(),"1"==e.inputForm.type?i("el-form-item",{attrs:{label:"固定在标签栏",prop:"affix"}},[i("el-radio-group",{model:{value:e.inputForm.affix,callback:function(t){e.$set(e.inputForm,"affix",t)},expression:"inputForm.affix"}},[i("el-radio",{attrs:{label:"1"}},[e._v("是")]),i("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1):e._e(),"0"!==e.inputForm.type&&"3"!==e.inputForm.type?i("el-form-item",{attrs:{label:"授权标识",prop:"permission"}},[i("el-input",{attrs:{maxlength:"200",placeholder:"多个用逗号分隔, 如: user:list,user:create"},model:{value:e.inputForm.permission,callback:function(t){e.$set(e.inputForm,"permission",t)},expression:"inputForm.permission"}})],1):e._e(),i("el-form-item",{attrs:{label:"排序号",prop:"sort"}},[i("el-input-number",{attrs:{step:30,"controls-position":"right",min:0,label:"排序号"},model:{value:e.inputForm.sort,callback:function(t){e.$set(e.inputForm,"sort",t)},expression:"inputForm.sort"}})],1),i("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[i("el-input",{attrs:{maxlength:"200",type:"textarea",rows:2,placeholder:"备注"},model:{value:e.inputForm.remarks,callback:function(t){e.$set(e.inputForm,"remarks",t)},expression:"inputForm.remarks"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:function(t){e.visible=!1}}},[e._v("关闭")]),"view"!=e.method?i("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{size:"small",type:"primary",icon:"el-icon-circle-check"},on:{click:function(t){return e.doSubmit()}}},[e._v("确定")]):e._e()],1)],1),i("Icon",{ref:"icon",on:{getValue:function(t){return e.inputForm.icon=t}}})],1)},r=[],a=(i("b0c0"),i("ac62")),o=i("fd68"),s=i("755f"),l={data:function(){var e=this,t=function(t,i,n){1!==e.inputForm.type||/\S/.test(i)?n():n(new Error("菜单URL不能为空"))};return{visible:!1,loading:!1,method:"",title:"新增",typeList:["目录","菜单","按钮","路由"],menuList:[],menuListTreeProps:{label:"name",children:"children"},inputForm:{id:"",type:"1",name:"",parent:{id:"",name:""},href:"",permission:"",sort:30,icon:"",remarks:"",target:"",isShow:"1",affix:"2"},dataRule:{name:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],"parent.id":[{required:!0,message:"上级菜单不能为空",trigger:"change"}],url:[{validator:t,trigger:"blur"}]}}},components:{SelectTree:o["a"],Icon:a["a"]},methods:{init:function(e,t){var i=this;this.method=e,this.inputForm.id=t.id,"add"===e?this.title="新增":"addChild"===e?this.title="添加下级":"edit"===e?this.title="修改":"view"===e&&(this.title="查看"),s["a"].treeData({extId:this.inputForm.id}).then((function(e){var t=e.data;i.menuList=t,i.inputForm.parent.id="",i.inputForm.parent.name=""})).then((function(){i.visible=!0,i.$nextTick((function(){i.$refs.menuParentTree.clearHandle(),i.$refs["inputForm"].resetFields(),i.inputForm.parent.id=t.parent.id,i.inputForm.parent.name=t.parent.name}))})).then((function(){"edit"!==e&&"view"!==e||s["a"].queryById(i.inputForm.id).then((function(e){var t=e.data;i.inputForm=i.recover(i.inputForm,t)}))}))},selectIcon:function(){this.$refs.icon.visible=!0},doSubmit:function(){var e=this;this.$refs["inputForm"].validate((function(t){t&&(e.loading=!0,"0"===e.inputForm.type&&(e.inputForm.href=""),"2"!==e.inputForm.type&&"3"!==e.inputForm.type||(e.inputForm.isShow="0"),s["a"].save(e.inputForm).then((function(t){var i=t.data;e.loading=!1,e.$message.success(i),e.visible=!1,e.$emit("refreshDataList")})).catch((function(){e.loading=!1})))}))}}},u=l,c=i("2877"),d=Object(c["a"])(u,n,r,!1,null,null,null);t["default"]=d.exports},ac62:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"图标选择","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[i("el-tabs",{attrs:{value:"first",type:"card"}},[i("el-tab-pane",{attrs:{label:"Element图标",name:"first"}},[i("ul",{staticClass:"icon-list"},e._l(e.iconList,(function(t,n){return i("li",{key:n},[i("el-button",{class:{"is-active":t===e.icon},on:{click:function(i){return e.iconActiveHandle(t)}}},[i("i",{class:t})])],1)})),0)]),i("el-tab-pane",{attrs:{label:"Font Awesome图标",name:"second"}},[i("ul",{staticClass:"icon-list"},e._l(e.iconList2,(function(t,n){return i("li",{key:n},[i("el-button",{class:{"is-active":t===e.icon},on:{click:function(i){return e.iconActiveHandle(t)}}},[i("i",{class:t})])],1)})),0)])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:function(t){e.visible=!1}}},[e._v("关闭")]),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-check"},on:{click:function(t){return e.doSubmit()}}},[e._v("确定")])],1)],1)},r=[],a=i("7624"),o=i("2e13"),s={name:"Icon",data:function(){return{visible:!1,iconList:a["a"],iconList2:o["a"],icon:""}},methods:{iconActiveHandle:function(e){this.icon=e},doSubmit:function(){this.$emit("getValue",this.icon),this.visible=!1}}},l=s,u=(i("b1ad"),i("2877")),c=Object(u["a"])(l,n,r,!1,null,"e737caa0",null);t["a"]=c.exports},b1ad:function(e,t,i){"use strict";var n=i("307a8"),r=i.n(n);r.a},b46bb:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page"},[i("el-form",{ref:"searchForm",staticClass:"query-form",attrs:{size:"small",inline:!0,model:e.searchForm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshList()},submit:function(e){e.preventDefault()}}},[i("el-form-item",{attrs:{prop:"name"}},[i("el-input",{attrs:{size:"small",placeholder:"菜单名称",clearable:""},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(t){return e.refreshList()}}},[e._v("查询")]),i("el-button",{attrs:{size:"small",icon:"el-icon-refresh-right"},on:{click:function(t){return e.resetSearch()}}},[e._v("重置")])],1)],1),i("div",{staticClass:"bg-white top"},[i("vxe-toolbar",{attrs:{refresh:{query:e.refreshList}},scopedSlots:e._u([{key:"buttons",fn:function(){return[e.hasPermission("sys:menu:add")?i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(t){return e.add()}}},[e._v("新增")]):e._e(),e.hasPermission("sys:menu:del")?i("el-button",{attrs:{disabled:e.$refs.xTree&&0===e.$refs.xTree.getCheckboxRecords().length,type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:function(t){return e.del()}}},[e._v("删除")]):e._e()]},proxy:!0}])}),i("div",{staticStyle:{height:"calc(100% - 50px)"}},[i("vxe-table",{ref:"xTree",attrs:{border:"inner","auto-resize":"",resizable:"",height:"auto","row-id":"id",size:"small","show-header-overflow":"","show-overflow":"","highlight-hover-row":"","print-config":{},"export-config":{},"tree-config":{},loading:e.loading,"checkbox-config":{checkStrictly:!0},data:e.dataList}},[i("vxe-column",{attrs:{type:"checkbox",width:"40px"}}),i("vxe-column",{attrs:{title:"名称",field:"name",align:"left","tree-node":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("sys:menu:edit")?i("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(i){return e.edit(t.row.id)}}},[e._v(e._s(t.row.name))]):e.hasPermission("sys:menu:view")?i("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(i){return e.view(t.row.id)}}},[e._v(e._s(t.row.name))]):i("span",[e._v(e._s(t.row.name))])]}}])}),i("vxe-column",{attrs:{title:"图标",field:"icon",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("i",{class:e.row.icon})]}}])}),i("vxe-column",{attrs:{title:"类型",field:"type",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.type?i("el-tag",{attrs:{size:"small"}},[e._v("目录")]):"1"===t.row.type?i("el-tag",{attrs:{size:"small",type:"success"}},[e._v("菜单")]):"2"===t.row.type?i("el-tag",{attrs:{size:"small",type:"info"}},[e._v("按钮")]):"3"===t.row.type?i("el-tag",{attrs:{size:"small",type:"info"}},[e._v("路由")]):e._e()]}}])}),i("vxe-column",{attrs:{title:"排序号",field:"sort",width:"170px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input-number",{attrs:{size:"small",step:30,min:0,max:1e4,label:"描述文字"},on:{change:function(i){return e.sortChange(t.row)}},model:{value:t.row.sort,callback:function(i){e.$set(t.row,"sort",i)},expression:"scope.row.sort"}})]}}])}),i("vxe-column",{attrs:{title:"是否显示",field:"isShow",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.type||"1"===t.row.type?i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"1","inactive-value":"0"},on:{change:function(i){return e.statusChange(t.row)}},model:{value:t.row.isShow,callback:function(i){e.$set(t.row,"isShow",i)},expression:"scope.row.isShow"}}):e._e()]}}])}),i("vxe-column",{attrs:{title:"菜单路由",field:"href"}}),i("vxe-column",{attrs:{title:"权限标志",field:"permission"}}),i("vxe-column",{attrs:{title:"操作",width:"150px",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.showRight(t.row)}}},[e._v("数据规则")]),i("el-divider",{attrs:{direction:"vertical"}}),i("el-dropdown",{attrs:{size:"small"},on:{command:e.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[e._v(" 更多"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.hasPermission("sys:menu:view")?i("el-dropdown-item",{attrs:{command:{method:"view",id:t.row.id}}},[e._v(" 查看 ")]):e._e(),e.hasPermission("sys:menu:edit")?i("el-dropdown-item",{attrs:{command:{method:"edit",id:t.row.id}}},[e._v(" 修改 ")]):e._e(),e.hasPermission("sys:menu:del")?i("el-dropdown-item",{attrs:{command:{method:"del",id:t.row.id}}},[e._v(" 删除 ")]):e._e(),e.hasPermission("sys:menu:add")?i("el-dropdown-item",{attrs:{command:{method:"addChild",row:t.row}}},[e._v(" 添加下级菜单 ")]):e._e()],1)],1)]}}])})],1)],1)],1),i("el-drawer",{attrs:{size:"700px",title:"数据规则列表，所属菜单: "+this.dataRuleTitle,visible:e.rightVisible,direction:"rtl"},on:{"update:visible":function(t){e.rightVisible=t}}},[i("data-rule-list",{ref:"dataRuleList",on:{closeRight:e.closeRight}})],1),i("menu-form",{ref:"menuForm",on:{refreshDataList:e.refreshList}})],1)},r=[],a=(i("c975"),i("a15b"),i("d81d"),i("45fc"),i("4e82"),i("b0c0"),i("498a"),i("7224")),o=i("5935"),s=i("c695"),l=i.n(s),u=i("755f"),c={data:function(){return{rightVisible:!1,loading:!1,dataRuleTitle:"",searchForm:{name:""},dataList:[]}},components:{MenuForm:a["default"],DataRuleList:o["default"]},activated:function(){this.refreshList()},methods:{refreshList:function(){var e=this;this.loading=!0,u["a"].treeData({isShowHide:1}).then((function(t){var i=t.data;e.loading=!1,e.dataList=i[0].children,e.handleSearch()}))},handleSearch:function(){var e=this,t=l.a.toValueString(this.searchForm.name).trim();if(t){var i={children:"children"},n=["name"];this.dataList=l.a.searchTree(this.dataList,(function(e){return n.some((function(i){return l.a.toValueString(e[i]).indexOf(t)>-1}))}),i),this.$nextTick((function(){e.$refs.xTree.setAllTreeExpand(!0)}))}},resetSearch:function(){this.$refs.searchForm.resetFields(),this.refreshList()},addChild:function(e){this.$refs.menuForm.init("addChild",{id:"",parent:{id:e.id,name:name}})},add:function(){this.$refs.menuForm.init("add",{id:"",parent:{id:"",name:""}})},edit:function(e){this.$refs.menuForm.init("edit",{id:e,parent:{id:"",name:""}})},view:function(e){this.$refs.menuForm.init("view",{id:e,parent:{id:"",name:""}})},handleCommand:function(e){"view"===e.method?this.view(e.id):"edit"===e.method?this.edit(e.id):"del"===e.method?this.del(e.id):"addChild"===e.method&&this.addChild(e.row)},del:function(e){var t=this,i=e||this.$refs.xTree.getCheckboxRecords().map((function(e){return e.id})).join(",");this.$confirm("确定删除该条记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,u["a"].delete(i).then((function(e){var i=e.data;t.loading=!1,t.$message({message:i,type:"success",duration:1500}),t.refreshList()}))}))},statusChange:function(e){var t=this;this.loading=!0,u["a"].save({id:e.id,isShow:e.isShow}).then((function(e){var i=e.data;t.$message({message:i,type:"success",duration:1500}),t.loading=!1,t.refreshList()}))},sortChange:function(e){var t=this;this.loading=!0,u["a"].save({id:e.id,sort:e.sort}).then((function(e){var i=e.data;t.$message({message:i,type:"success",duration:1500}),t.loading=!1,t.refreshList()}))},showRight:function(e){var t=this;this.rightVisible=!0,this.$nextTick((function(){t.$refs.dataRuleList.refreshList(e.id),t.dataRuleTitle=e.name}))},closeRight:function(){this.rightVisible=!1}}},d=c,m=i("2877"),p=Object(m["a"])(d,n,r,!1,null,null,null);t["default"]=p.exports},b808:function(e,t,i){"use strict";var n=i("8f4d");t["a"]={save:function(e){return Object(n["a"])({url:"/sys/dataRule/save",method:"post",data:e})},delete:function(e){return Object(n["a"])({url:"/sys/dataRule/delete",method:"delete",params:{id:e}})},queryById:function(e){return Object(n["a"])({url:"/sys/dataRule/queryById",method:"get",params:{id:e}})},list:function(e){return Object(n["a"])({url:"/sys/dataRule/list",method:"get",params:e})},treeData:function(){return Object(n["a"])({url:"/sys/dataRule/treeData",method:"get"})}}},c8d2:function(e,t,i){var n=i("5e77").PROPER,r=i("d039"),a=i("5899"),o="​᠎";e.exports=function(e){return r((function(){return!!a[e]()||o[e]()!==o||n&&a[e].name!==e}))}}}]);