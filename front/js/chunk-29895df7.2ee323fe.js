(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29895df7"],{6867:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{fullscreen:"",title:"设计流程表单",center:"","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(i){t.visible=i}}},[e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"inputForm",class:"view"===t.method?"readonly":"",attrs:{size:"small",model:t.inputForm,disabled:"view"===t.method,"label-width":"120px"}},[t.visible?e("fm-making-form",{ref:"formDesign",staticStyle:{height:"700px"},attrs:{data:t.options,uploadPath:this.$http.BASE_URL+"/file/upload?uploadPath=/formbuilder",preview:"",clearable:""}},[e("template",{slot:"action"})],2):t._e()],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["view"!=t.method?e("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(i){return t.doSubmit(0)}}},[t._v("保存草稿")]):t._e(),"view"!=t.method?e("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(i){return t.doSubmit(1)}}},[t._v("保存并发布")]):t._e(),e("el-button",{on:{click:function(i){t.visible=!1}}},[t._v("放弃")])],1)],1)],1)},o=[],r=e("76d6"),s={data:function(){return{title:"",method:"",visible:!1,loading:!1,options:{},inputForm:{id:"",version:"",formDefinitionId:"",status:"",isPrimary:"",json:""}}},methods:{init:function(t,i){var e=this;this.visible=!0,this.loading=!1,this.$nextTick((function(){e.inputForm.json="",e.inputForm.version="",e.inputForm.id=i,e.inputForm.formDefinitionId=t,i?(e.loading=!0,r["a"].queryById(i).then((function(t){var i=t.data;e.inputForm=e.recover(e.inputForm,i),e.inputForm.json&&(e.options=JSON.parse(e.inputForm.json),e.$refs.formDesign.setJSON(e.options)),e.loading=!1}))):e.$refs.formDesign.setJSON({list:[],config:{labelWidth:100,labelPosition:"right",size:"small",customClass:""}})}))},doSubmit:function(t){var i=this;this.inputForm.json=JSON.stringify(this.$refs.formDesign.getJSON()),this.inputForm.status=t,this.inputForm.isPrimary="1",this.$refs["inputForm"].validate((function(t){t&&r["a"].save(i.inputForm).then((function(t){var e=t.data;i.visible=!1,i.$message.success(e),i.$emit("refreshDataList")}))}))}}},a=s,l=e("2877"),u=Object(l["a"])(a,n,o,!1,null,null,null);i["default"]=u.exports},"76d6":function(t,i,e){"use strict";var n=e("8f4d");i["a"]={save:function(t){return Object(n["a"])({url:"/extension/formDefinitionJson/save",method:"post",data:t})},updatePrimary:function(t){return Object(n["a"])({url:"/extension/formDefinitionJson/updatePrimary",method:"put",params:{id:t}})},delete:function(t){return Object(n["a"])({url:"/extension/formDefinitionJson/delete",method:"delete",params:{ids:t}})},queryById:function(t){return Object(n["a"])({url:"/extension/formDefinitionJson/queryById",method:"get",params:{id:t}})},list:function(t){return Object(n["a"])({url:"/extension/formDefinitionJson/list",method:"get",params:t})}}}}]);