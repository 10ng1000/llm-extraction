(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54f5c992"],{1422:function(e,t,i){"use strict";var n=i("f862"),r=i.n(n);r.a},3733:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"创建菜单","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{ref:"inputForm",attrs:{size:"small",model:e.inputForm,"label-width":"120px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSubmit()},submit:function(e){e.preventDefault()}}},[i("el-form-item",{attrs:{label:"上级菜单",prop:"parent.id",rules:[{required:!0,message:"请选择上级菜单",trigger:"blur"}]}},[i("SelectTree",{ref:"menuParentTree",attrs:{props:{value:"id",label:"name",children:"children"},data:e.menuList,value:e.inputForm.parent.id,clearable:!0,accordion:!0},on:{getValue:function(t){e.inputForm.parent.id=t}}})],1),i("el-form-item",{attrs:{label:"名称",prop:"name",rules:[{required:!0,message:"名称不能为空",trigger:"blur"}]}},[i("el-input",{attrs:{maxlength:"200",placeholder:"菜单名称"},model:{value:e.inputForm.name,callback:function(t){e.$set(e.inputForm,"name",t)},expression:"inputForm.name"}})],1),"2"!==e.inputForm.type?i("el-form-item",{attrs:{label:"菜单图标",prop:"icon"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",readonly:!0,placeholder:"菜单图标名称"},on:{focus:e.selectIcon},model:{value:e.inputForm.icon,callback:function(t){e.$set(e.inputForm,"icon",t)},expression:"inputForm.icon"}})],1):e._e()],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:function(t){e.visible=!1}}},[e._v("关闭")]),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-check"},on:{click:function(t){return e.doSubmit()}}},[e._v("确定")])],1)],1),i("Icon",{ref:"icon",on:{getValue:function(t){return e.inputForm.icon=t}}})],1)},r=[],o=(i("b0c0"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"图标选择","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[i("el-tabs",{attrs:{value:"first",type:"card"}},[i("el-tab-pane",{attrs:{label:"Element图标",name:"first"}},[i("ul",{staticClass:"icon-list"},e._l(e.iconList,(function(t,n){return i("li",{key:n},[i("el-button",{class:{"is-active":t===e.icon},on:{click:function(i){return e.iconActiveHandle(t)}}},[i("i",{class:t})])],1)})),0)]),i("el-tab-pane",{attrs:{label:"Font Awesome图标",name:"second"}},[i("ul",{staticClass:"icon-list"},e._l(e.iconList2,(function(t,n){return i("li",{key:n},[i("el-button",{class:{"is-active":t===e.icon},on:{click:function(i){return e.iconActiveHandle(t)}}},[i("i",{class:t})])],1)})),0)])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:function(t){e.visible=!1}}},[e._v("关闭")]),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-check"},on:{click:function(t){return e.doSubmit()}}},[e._v("确定")])],1)],1)],1)}),a=[],l=i("7624"),s=i("2e13"),c={name:"Icon",data:function(){return{visible:!1,iconList:l["a"],iconList2:s["a"],icon:""}},methods:{iconActiveHandle:function(e){this.icon=e},doSubmit:function(){this.$emit("getValue",this.icon),this.visible=!1}}},u=c,f=(i("1422"),i("2877")),d=Object(f["a"])(u,o,a,!1,null,"01451af6",null),m=d.exports,p=i("fd68"),v=i("755f"),h={data:function(){return{visible:!1,menuList:[],menuListTreeProps:{label:"name",children:"children"},inputForm:{parent:{id:""},name:"",href:"",icon:"",isShow:"1",affix:"2",type:"1",target:""}}},components:{SelectTree:p["a"],Icon:m},methods:{init:function(e,t,i){var n=this;this.inputForm.href=e,this.inputForm.name=t,this.inputForm.target=i,v["a"].treeData().then((function(e){var t=e.data;n.menuList=t})),this.visible=!0,this.$nextTick((function(){n.$refs["inputForm"].resetFields(),n.$refs.menuParentTree.clearHandle()}))},iconActiveHandle:function(e){this.inputForm.icon=e},selectIcon:function(){this.$refs.icon.visible=!0},doSubmit:function(){var e=this;this.$refs["inputForm"].validate((function(t){if(t){var i=JSON.parse(JSON.stringify(e.inputForm));i.href=i.href+"&title="+i.name,v["a"].save(i).then((function(t){var i=t.data;e.$message.success({dangerouslyUseHTMLString:!0,message:i}),e.visible=!1}))}}))}}},b=h,g=Object(f["a"])(b,n,r,!1,null,null,null);t["a"]=g.exports},"3b26":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page bg-white"},[i("vxe-toolbar",{attrs:{refresh:{query:e.refreshList}},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.add()}}},[e._v("新建")])]},proxy:!0}])}),i("div",{staticStyle:{height:"calc(100% - 40px)"}},[i("vxe-table",{ref:"reportsTable",attrs:{border:"inner","auto-resize":"",resizable:"",height:"auto",loading:e.loading,size:"small","show-header-overflow":"","show-overflow":"","highlight-hover-row":"","menu-config":{},"print-config":{},"import-config":{},"export-config":{},data:e.dataList,"checkbox-config":{}}},[i("vxe-column",{attrs:{type:"seq",width:"40"}}),i("vxe-column",{attrs:{title:"报表名",field:"name",sortable:""}}),i("vxe-column",{attrs:{title:"更新日期",field:"updateDate",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.moment(t.row.updateDate).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),i("vxe-column",{attrs:{title:"操作",width:"200px",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return e.pre(t.row)}}},[e._v("预览")]),i("el-divider",{attrs:{direction:"vertical"}}),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return e.design(t.row)}}},[e._v("设计")]),i("el-divider",{attrs:{direction:"vertical"}}),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return e.del(t.row)}}},[e._v("删除")]),i("el-divider",{attrs:{direction:"vertical"}}),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return e.createMenu(t.row)}}},[e._v("发布")])]}}])})],1),i("gen-menu-form",{ref:"genMenuForm"})],1)],1)},r=[],o=(i("99af"),i("b0c0"),i("3733")),a=i("8f4d"),l={delete:function(e){return Object(a["a"])({url:"/reports/delete",method:"delete",params:{id:e}})},list:function(e){return Object(a["a"])({url:"/reports/list",method:"get",params:e})}},s={data:function(){return{dataList:[],loading:!1}},components:{GenMenuForm:o["a"]},activated:function(){this.refreshList()},methods:{refreshList:function(){var e=this;this.loading=!0,l.list().then((function(t){var i=t.data;e.dataList=i.reports,e.loading=!1}))},add:function(){this.$router.push({path:"/ureport/designer",query:{title:"新建报表",iframeUrl:"".concat("http://82.157.118.175:8094/jeeplus-vue","/ureport/designer")}})},pre:function(e){this.$router.push({path:"/ureport/preview",query:{title:"预览报表",iframeUrl:"".concat("http://82.157.118.175:8094/jeeplus-vue","/ureport/preview?_u=file:").concat(e.name)}})},design:function(e){this.$router.push({path:"/ureport/designer",query:{iframeUrl:"".concat("http://82.157.118.175:8094/jeeplus-vue","/ureport/designer?_u=file:").concat(e.name),title:"编辑报表"}})},del:function(e){var t=this;this.$confirm("确定删除所选项吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,l.delete("file:".concat(e.name)).then((function(e){var i=e.data;t.loading=!1,t.$message.success(i),t.refreshList()}))}))},createMenu:function(e){this.$refs.genMenuForm.init("/ureport/preview?_u=file:".concat(e.name),e.name,"iframe")}}},c=s,u=i("2877"),f=Object(u["a"])(c,n,r,!1,null,null,null);t["default"]=f.exports},f862:function(e,t,i){}}]);