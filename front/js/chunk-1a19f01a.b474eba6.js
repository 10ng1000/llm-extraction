(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a19f01a","chunk-63bbfa16","chunk-e93c4abe","chunk-d86c6dca"],{"03e3":function(t,e,a){"use strict";var s=a("0bd7"),r=a.n(s);r.a},"078d":function(t,e,a){"use strict";var s=a("8f4d");e["a"]={save:function(t){return Object(s["a"])({url:"/extension/formDefinition/save",method:"post",data:t})},delete:function(t){return Object(s["a"])({url:"/extension/formDefinition/delete",method:"delete",params:{ids:t}})},queryById:function(t){return Object(s["a"])({url:"/extension/formDefinition/queryById",method:"get",params:{id:t}})},queryByJsonId:function(t){return Object(s["a"])({url:"/extension/formDefinition/queryByJsonId",method:"get",params:{jsonId:t}})},list:function(t){return Object(s["a"])({url:"/extension/formDefinition/list",method:"get",params:t})}}},"0bd7":function(t,e,a){},"0c36":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h4",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.title))]),1===t.code?s("img",{staticClass:"process-status-img",attrs:{src:a("7097")}}):t._e(),2===t.code?s("img",{staticClass:"process-status-img",attrs:{src:a("0d1b1")}}):t._e(),3===t.code?s("img",{staticClass:"process-status-img",attrs:{src:a("8ffc")}}):t._e(),4===t.code?s("img",{staticClass:"process-status-img",attrs:{src:a("4a1e")}}):t._e(),5===t.code?s("img",{staticClass:"process-status-img",attrs:{src:a("d11e")}}):t._e(),6===t.code?s("img",{staticClass:"process-status-img",attrs:{src:a("4b81")}}):t._e(),s("el-tabs",{attrs:{type:"border-card"},model:{value:t.selectedTab,callback:function(e){t.selectedTab=e},expression:"selectedTab"}},[s("el-tab-pane",{attrs:{label:"表单信息",name:"form-first"}},["2"===t.formType?s(t.form,{ref:"form",tag:"component",class:t.formReadOnly?"readonly":"",attrs:{formReadOnly:t.formReadOnly,businessId:t.businessId}}):t._e(),"2"!==t.formType?s("PreviewForm",{ref:"form",attrs:{processDefinitionId:t.procDefId,edit:!1,taskFormData:t.taskFormData}}):t._e()],1),t.procInsId?s("el-tab-pane",{attrs:{label:"流程信息",name:"form-second"}},[s("flow-time-line",{attrs:{historicTaskList:t.historicTaskList}})],1):t._e(),s("el-tab-pane",{attrs:{label:"流程图",name:"form-third"}},[s("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("流程图")])]),t.procInsId?s("flow-chart",{ref:"chart1",attrs:{processInstanceId:t.procInsId}}):t._e(),t.procInsId?t._e():s("flow-chart",{ref:"chart2",attrs:{processDefId:t.procDefId}})],1)],1),t.procInsId?s("el-tab-pane",{attrs:{label:"流转记录",name:"form-forth"}},[s("flow-step",{attrs:{historicTaskList:t.historicTaskList}})],1):t._e()],1)],1)},r=[],i=a("326b"),n=a("150f"),o=a("cbe8"),l=a("7525"),c=a("c7d4"),u=a("dd2c"),d=a("f9a9"),f=a("101e"),m={activated:function(){var t=this;this.init(),"2"===this.formType?"/404"===this.formUrl?(this.form=null,this.$message.info("没有关联流程表单!")):this.form=f("modules".concat(this.formUrl)):("/404"===this.formUrl?this.$refs.form.createForm(""):this.$refs.form.createForm(this.formUrl),u["a"].getHistoryTaskFormData({processInstanceId:this.procInsId,procDefId:this.procDefId,taskDefKey:this.taskDefKey}).then((function(e){var a=e.data;t.taskFormData=a}))),d["a"].queryProcessStatus(this.procDefId,this.procInsId).then((function(e){var a=e.data;t.code=a})),c["a"].historicTaskList(this.procInsId).then((function(e){var a=e.data;t.historicTaskList=a}))},components:{UserSelect:i["a"],PreviewForm:n["default"],FlowStep:o["default"],FlowTimeLine:l["default"]},watch:{selectedTab:function(t){"form-third"===t&&(this.procInsId?this.$refs.chart1.init():this.$refs.chart2.init())}},methods:{init:function(){this.selectedTab="form-first",this.procDefId=this.$route.query.procDefId,this.procDefKey=this.$route.query.procDefKey,this.formType=this.$route.query.formType,this.formUrl=this.$route.query.formUrl,this.taskId=this.$route.query.taskId,this.taskDefKey=this.$route.query.taskDefKey,this.status=this.$route.query.status,this.title=this.$route.query.formTitle,this.businessId=this.$route.query.businessId,this.procInsId=this.$route.query.procInsId,this.formReadOnly=!0}},data:function(){return{form:null,formType:"",formUrl:"",selectedTab:"frist",historicTaskList:[],procDefId:"",code:"1",procInsId:"",readOnly:!1,procDefKey:"",taskId:"",taskFormData:[],taskDefKey:"",status:"",title:"",businessId:""}}},p=m,h=(a("03e3"),a("2877")),b=Object(h["a"])(p,s,r,!1,null,null,null);e["default"]=b.exports},"0d1b1":function(t,e,a){t.exports=a.p+"img/2.f3ff8bed.png"},"150f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"min-height":"50px"}},[t.visible?a("fm-generate-form",{ref:"generateForm",staticClass:"readonly",attrs:{data:t.options,edit:t.edit,value:t.formData}}):t._e()],1)},r=[],i=(a("a4d3"),a("4de4"),a("4160"),a("caad"),a("4ec9"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("2fa7")),n=a("078d"),o=a("dd2c");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={data:function(){return{title:"",method:"",visible:!1,loading:!1,formData:{},dataBindMap:new Map,options:{list:[],config:{labelWidth:100,labelPosition:"right",size:"small",customClass:""}}}},props:{processDefinitionId:{type:String,required:!0},taskFormData:{type:Array,required:!1,default:[]},edit:{type:Boolean,default:!0}},methods:{generateModel:function(t){for(var e=this,a=0;a<t.length;a++)"grid"===t[a].type?t[a].columns.forEach((function(t){e.generateModel(t.list)})):"tabs"===t[a].type?t[a].tabs.forEach((function(t){e.generateModel(t.list)})):t[a].options.dataBind&&this.dataBindMap.set(t[a].model,t[a])},createForm:function(t){var e=this;t?(this.loading=!0,this.visible=!1,this.formData={},n["a"].queryByJsonId(t).then((function(t){var a=t.data;e.options=JSON.parse(a.formDefinitionJson.json),e.dataBindMap.clear(),e.generateModel(e.options.list),setTimeout((function(){e.loading=!1,e.visible=!0,e.$nextTick((function(){var t=[],a=[];e.taskFormData.forEach((function(s){void 0!==s.value&&(e.formData["".concat(s.id)]=s.value),!0===s.readable&&a.push("".concat(s.id)),!1===s.writable&&t.push("".concat(s.id))}));var s=e.$refs.generateForm.getDataBindFields().filter((function(t){if(!a.includes(t))return!0}));for(var r in e.formData){var i=e.dataBindMap.get(r);i&&("checkbox"===i["type"]||"imgupload"===i["type"]||"table"===i["type"]||"select"===i["type"]&&i.options.multiple||"fileupload"===i["type"])&&(e.formData[r]&&"string"===typeof e.formData[r]?e.formData[r]=JSON.parse(e.formData[r]):e.formData[r]||(e.formData[r]=[])),!i||"number"!==i["type"]&&"number"!==i["options"].dataType||void 0!==e.formData[r]&&""!==e.formData[r]&&"string"===typeof e.formData[r]&&(e.formData[r]=JSON.parse(e.formData[r]))}e.$refs.generateForm.hide(s),e.$refs.generateForm.disabled(t,!0),e.$refs.generateForm.setData(e.formData)}))}),500)})).catch((function(){e.loading=!1,e.visible=!0}))):(this.$message.info("没有关联流程表单!"),this.visible=!0)},submitStartFormData:function(t,e){var a=this;this.$refs.generateForm.getData().then((function(s){a.loading=!0,o["a"].submitStartFormData(c({id:a.id},t,{data:JSON.stringify(s)})).then((function(t){var s=t.data;a.visible=!1,a.loading=!1,a.$message.success("启动成功"),e(s)}))})).catch((function(t){a.loading=!1}))},submitTaskFormData:function(t,e,a,s,r,i){var n=this;this.$refs.generateForm.getData().then((function(l){l=c({},t,{},l),n.loading=!0,o["a"].submitTaskFormData({id:n.id,procInsId:e,taskId:a,assignee:s,comment:r,data:JSON.stringify(l)}).then((function(t){var e=t.data;n.visible=!1,n.loading=!1,n.$message.success("提交成功"),i(e)}))})).catch((function(t){n.loading=!1}))}}},d=u,f=a("2877"),m=Object(f["a"])(d,s,r,!1,null,null,null);e["default"]=m.exports},"326b":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-input",{staticClass:"input-with-select",staticStyle:{"line-hight":"40px"},attrs:{placeholder:"请选择",size:t.size,disabled:t.disabled,readonly:t.readonly},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[a("el-button",{attrs:{slot:"append",disabled:t.disabled,readonly:t.readonly,icon:"el-icon-search"},on:{click:t.showUserSelect},slot:"append"})],1),a("user-select",{ref:"userSelect",attrs:{limit:t.limit,selectData:t.selectData},on:{doSubmit:t.selectUsersToInput}})],1)},r=[],i=(a("4160"),a("a15b"),a("d81d"),a("b0c0"),a("a9e3"),a("ac1f"),a("1276"),a("159b"),a("6714")),n=a("9ebe"),o={data:function(){return{name:"",labelValue:this.value,selectData:[]}},props:{limit:Number,value:String,size:{type:String,default:function(){return"small"}},readonly:{type:Boolean,default:function(){return!1}},disabled:{type:Boolean,default:function(){return!1}}},components:{userSelect:i["a"]},watch:{value:{handler:function(t){var e=this;this.selectData=[],t&&t.split(",").forEach((function(t){n["a"].queryById(t).then((function(t){var a=t.data;a&&""!==a.id&&e.selectData.push(a)}))}))},immediate:!0,deep:!1},selectData:{handler:function(t){this.name=t.map((function(t){return t.name})).join(",")},immediate:!1,deep:!1}},methods:{selectUsersToInput:function(t){this.selectData=t,this.labelValue=t.map((function(t){return t.id})).join(","),this.name=t.map((function(t){return t.name})).join(","),this.$emit("getValue",this.labelValue,this.name)},showUserSelect:function(){this.$refs.userSelect.init()}}},l=o,c=(a("859b"),a("2877")),u=Object(c["a"])(l,s,r,!1,null,null,null);e["a"]=u.exports},"462c":function(t,e,a){"use strict";var s=a("fd0e"),r=a.n(s);r.a},"4a1e":function(t,e,a){t.exports=a.p+"img/4.87e04f57.png"},"4b81":function(t,e,a){t.exports=a.p+"img/6.10444ff4.png"},"4ec9":function(t,e,a){a("6f48")},6714:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"userDialog",attrs:{title:"用户选择",width:"1000px","close-on-click-modal":!1,"append-to-body":!0,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("el-container",{staticStyle:{height:"500px"}},[a("el-aside",{attrs:{width:"200px"}},[a("el-card",{staticClass:"org"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-input",{attrs:{placeholder:"请输入组织机构过滤",size:"small"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),a("el-tree",{ref:"officeTree",attrs:{data:t.officeTreeData,props:{value:"id",label:"name",children:"children"},"default-expand-all":"","highlight-current":"","node-key":"id","render-content":t.renderContent,"filter-node-method":t.filterNode,"expand-on-click-node":!1},on:{"node-click":t.handleNodeClick}})],1)],1),a("el-container",[a("el-header",{staticStyle:{"text-align":"left","font-size":"12px",height:"30px"}},[a("el-form",{ref:"searchForm",attrs:{size:"small",inline:!0,model:t.searchForm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.refreshList()},submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{prop:"loginName"}},[a("el-input",{attrs:{size:"small",placeholder:"登录名",clearable:""},model:{value:t.searchForm.loginName,callback:function(e){t.$set(t.searchForm,"loginName",e)},expression:"searchForm.loginName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(e){return t.refreshList()}}},[t._v("查询")]),a("el-button",{attrs:{size:"small",icon:"el-icon-refresh-right"},on:{click:function(e){return t.resetSearch()}}},[t._v("重置")])],1)],1)],1),a("el-main",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"userTable",staticStyle:{width:"100%"},attrs:{data:t.dataList,size:"small",border:"",height:"calc(100% - 40px)"},on:{"selection-change":t.selectionChangeHandle,"sort-change":t.sortChangeHandle}},[t.limit<=1?a("el-table-column",{attrs:{"header-align":"center",align:"center",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio",{attrs:{label:e.row.id,value:t.dataListAllSelections[0]&&t.dataListAllSelections[0].id},nativeOn:{change:function(a){return t.getTemplateRow(e.$index,e.row)}}},[a("span")])]}}],null,!1,3937999144)}):t._e(),t.limit>1?a("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}):t._e(),a("el-table-column",{attrs:{prop:"photo","header-align":"center",align:"center",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"35px"},attrs:{src:""===t.row.photo?"/static/img/avatar.png":t.row.photo}})]}}])}),a("el-table-column",{attrs:{prop:"loginName","header-align":"center",align:"center",sortable:"custom","min-width":"90",label:"登录名"}}),a("el-table-column",{attrs:{prop:"name","header-align":"center",align:"真实姓名",sortable:"custom","min-width":"90",label:"用户名"}}),a("el-table-column",{attrs:{prop:"companyDTO.name","header-align":"center",align:"center",sortable:"custom","min-width":"110",label:"所属机构"}}),a("el-table-column",{attrs:{prop:"officeDTO.name","header-align":"center",align:"center",sortable:"custom","min-width":"110",label:"所属部门"}}),a("el-table-column",{attrs:{prop:"loginFlag","header-align":"center",align:"center","min-width":"100",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===e.row.loginFlag?a("el-tag",{attrs:{size:"small",type:"success"}},[t._v("正常")]):"0"===e.row.loginFlag?a("el-tag",{attrs:{size:"small",type:"danger"}},[t._v("禁用")]):t._e()]}}])})],1),a("el-pagination",{attrs:{"current-page":t.pageNo,"page-sizes":[5,10,50,100],"page-size":t.pageSize,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}})],1)],1),a("el-aside",{attrs:{width:"200px"}},t._l(t.dataListAllSelections,(function(e){return a("el-tag",{key:e.id,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.del(e)}}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:function(e){t.visible=!1}}},[t._v("关闭")]),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-check"},on:{click:function(e){return t.doSubmit()}}},[t._v("确定")])],1)],1)],1)},r=[],i=(a("a4d3"),a("4de4"),a("4160"),a("c975"),a("a434"),a("b0c0"),a("a9e3"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("2fa7"));function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var l={data:function(){return{searchForm:{loginName:"",companyDTO:{id:""},officeDTO:{id:""},name:""},filterText:"",dataListAllSelections:[],dataListSelections:[],idKey:"id",dataList:[],dynamicTags:[],officeTreeData:[],pageNo:1,pageSize:10,total:0,orders:[],loading:!1,visible:!1}},props:{selectData:{type:Array,default:function(){return[]}},limit:{type:Number,default:999999}},watch:{filterText:function(t){this.$refs.officeTree.filter(t)}},methods:{init:function(){var t=this;this.visible=!0,this.$nextTick((function(){t.dataListAllSelections=JSON.parse(JSON.stringify(t.selectData)),t.refreshTree(),t.resetSearch()}))},renderContent:function(t,e){var a=e.node,s=e.data;e.store;return t("span",{class:"custom-tree-node"},["1"===s.type?t("i",{class:"fa fa-sitemap"}):t("i",{class:"fa fa-users"}),t("span",{class:"text"},[a.label])])},getTemplateRow:function(t,e){var a=this;this.dataListSelections=[e],this.$nextTick((function(){a.changePageCoreRecordData()}))},setSelectRow:function(){if(!this.dataListAllSelections||this.dataListAllSelections.length<=0)this.$refs.userTable.clearSelection();else{var t=this.idKey,e=[];this.dataListAllSelections.forEach((function(a){e.push(a[t])})),this.$refs.userTable.clearSelection();for(var a=0;a<this.dataList.length;a++)e.indexOf(this.dataList[a][t])>=0&&this.$refs.userTable.toggleRowSelection(this.dataList[a],!0)}},changePageCoreRecordData:function(){var t=this.idKey,e=this;if(this.dataListAllSelections.length<=0)this.dataListSelections.forEach((function(t){e.dataListAllSelections.push(t)}));else{var a=[];this.dataListAllSelections.forEach((function(e){a.push(e[t])}));var s=[];this.dataListSelections.forEach((function(r){s.push(r[t]),a.indexOf(r[t])<0&&e.dataListAllSelections.push(r)}));var r=[];this.dataList.forEach((function(e){s.indexOf(e[t])<0&&r.push(e[t])})),r.forEach((function(s){if(a.indexOf(s)>=0)for(var r=0;r<e.dataListAllSelections.length;r++)if(e.dataListAllSelections[r][t]===s){e.dataListAllSelections.splice(r,1);break}}))}},getAllSelectionData:function(){this.changePageCoreRecordData()},filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},del:function(t){var e=this;this.dataListAllSelections.splice(this.dataListAllSelections.indexOf(t),1),this.$nextTick((function(){e.setSelectRow()}))},refreshList:function(){var t=this;this.loading=!0,this.$http({url:"/sys/user/list",method:"get",params:o({current:this.pageNo,size:this.pageSize,orders:this.orders},this.searchForm)}).then((function(e){var a=e.data;t.dataList=a.records,t.total=a.total,t.pageNo=a.current,t.loading=!1,t.$nextTick((function(){t.setSelectRow()}))}))},refreshTree:function(){var t=this;this.$http({url:"/sys/office/treeData",method:"get"}).then((function(e){var a=e.data;t.officeTreeData=a}))},sizeChangeHandle:function(t){var e=this;this.pageSize=t,this.pageNo=1,this.refreshList(),this.$nextTick((function(){e.changePageCoreRecordData()}))},currentChangeHandle:function(t){var e=this;this.pageNo=t,this.refreshList(),this.$nextTick((function(){e.changePageCoreRecordData()}))},selectionChangeHandle:function(t){var e=this;this.dataListSelections=t,this.$nextTick((function(){e.changePageCoreRecordData()}))},sortChangeHandle:function(t){"officeDTO.name"===t.prop&&(t.prop="o.name"),"companyDTO.name"===t.prop&&(t.prop="c.name"),this.orders=[],null!=t.order&&this.orders.push({column:this.$utils.toLine(t.prop),asc:"ascending"===t.order}),this.refreshList()},handleNodeClick:function(t){"1"===t.type?(this.searchForm.companyDTO.id=t.id,this.searchForm.officeDTO.id=""):(this.searchForm.companyDTO.id="",this.searchForm.officeDTO.id=t.id),this.refreshList()},resetSearch:function(){this.searchForm.companyDTO.id="",this.searchForm.officeDTO.id="",this.$refs.officeTree.setCurrentKey(null),this.$refs.searchForm.resetFields(),this.refreshList()},doSubmit:function(){this.limit<this.dataListAllSelections.length?this.$message.error("你最多只能选择".concat(this.limit,"个用户")):(this.visible=!1,this.$emit("doSubmit",this.dataListAllSelections))}}},c=l,u=(a("ba1d"),a("2877")),d=Object(u["a"])(c,s,r,!1,null,null,null);e["a"]=d.exports},"6f48":function(t,e,a){"use strict";var s=a("6d61"),r=a("6566");s("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},7097:function(t,e,a){t.exports=a.p+"img/1.3d84f588.png"},7525:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("流程信息")])]),t.historicTaskMap.size?a("el-timeline",{attrs:{reverse:!0}},t._l(t.historicTaskMap,(function(e,s){return a("el-timeline-item",{key:s,attrs:{color:"#3f9eff",timestamp:t.moment(e[1][0].histIns.endTime).format("YYYY-MM-DD"),placement:"top"}},[a("el-card",{staticClass:"flow"},[a("h4",[t._v(t._s(e[1][0].histIns.activityName))]),a("el-row",{attrs:{gutter:25}},[t._l(e[1],(function(e,s){return[a("el-col",{key:s,staticClass:"tip",staticStyle:{"margin-left":"10px"},attrs:{span:11}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("审批人 : ")]),a("span",{staticClass:"value"},[t._v(t._s(e.assigneeName))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("办理状态 : ")]),a("span",{staticClass:"value"},[a("el-tag",{attrs:{type:e.comment.level,effect:"dark",size:"small"}},[t._v(t._s(e.comment.status)+" ")])],1)]),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("审批意见 : ")]),a("el-tooltip",{attrs:{effect:"dark",content:e.comment.message,placement:"top-start"}},[a("span",{staticClass:"value"},[t._v(" "+t._s(e.comment.message)+" ")])])],1),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("开始时间 : ")]),a("span",{staticClass:"value"},[t._v(" "+t._s(e.histIns.startTime)+" ")])]),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("结束时间 : ")]),a("span",{staticClass:"value"},[t._v(" "+t._s(e.histIns.endTime)+" ")])]),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("用时 : ")]),a("span",{staticClass:"value"},[t._v(t._s(e.durationTime||"0秒"))])])])]}))],2)],1)],1)})),1):t._e()],1)},r=[],i=(a("4160"),a("4ec9"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),{props:{historicTaskList:{type:Array,default:[]}},computed:{historicTaskMap:function(){var t=new Map;return this.historicTaskList.forEach((function(e){var a=e.histIns.activityId+e.histIns.startTime,s=t.get(a);if(s)s.push(e);else{var r=[];r.push(e),t.set(a,r)}})),t}}}),n=i,o=(a("462c"),a("2877")),l=Object(o["a"])(n,s,r,!1,null,null,null);e["default"]=l.exports},"859b":function(t,e,a){"use strict";var s=a("adc2"),r=a.n(s);r.a},"8ffc":function(t,e,a){t.exports=a.p+"img/3.7974eb06.png"},"9ebe":function(t,e,a){"use strict";var s=a("8f4d");e["a"]={save:function(t){return Object(s["a"])({url:"/sys/user/save",method:"post",headers:{arrayFormat:"repeat"},data:t})},saveInfo:function(t){return Object(s["a"])({url:"/sys/user/saveInfo",method:"post",headers:{arrayFormat:"repeat"},data:t})},savePwd:function(t){return Object(s["a"])({url:"/sys/user/savePwd",method:"put",params:t})},delete:function(t){return Object(s["a"])({url:"/sys/user/delete",method:"delete",params:{ids:t}})},queryById:function(t){return Object(s["a"])({url:"/sys/user/queryById",method:"get",params:{id:t}})},getMenus:function(){return Object(s["a"])({url:"/sys/user/getMenus",method:"get"})},info:function(){return Object(s["a"])({url:"/sys/user/info",method:"get"})},list:function(t){return Object(s["a"])({url:"/sys/user/list",method:"get",params:t})},exportTemplate:function(){return Object(s["a"])({url:"/sys/user/import/template",method:"get",responseType:"blob"})},exportExcel:function(t){return Object(s["a"])({url:"/sys/user/export",method:"get",params:t,responseType:"blob"})},importExcel:function(t){return Object(s["a"])({url:"/sys/user/import",method:"post",data:t})}}},adc2:function(t,e,a){},ba1d:function(t,e,a){"use strict";var s=a("db3f"),r=a.n(s);r.a},c7d4:function(t,e,a){"use strict";var s=a("8f4d");e["a"]={start:function(t){return Object(s["a"])({url:"/flowable/task/start",method:"post",data:t})},todoList:function(t){return Object(s["a"])({url:"/flowable/task/todo",method:"get",params:t})},historicList:function(t){return Object(s["a"])({url:"/flowable/task/historic",method:"get",params:t})},historicTaskList:function(t){return Object(s["a"])({url:"/flowable/task/historicTaskList",method:"get",params:{procInsId:t}})},myApplyedList:function(t){return Object(s["a"])({url:"/flowable/task/myApplyed",method:"get",params:t})},getTaskDef:function(t){return Object(s["a"])({url:"/flowable/task/getTaskDef",method:"get",params:t})},delegate:function(t,e){return Object(s["a"])({url:"/flowable/task/delegate",method:"put",params:{taskId:t,userId:e}})},callback:function(t){return Object(s["a"])({url:"/flowable/task/callback",method:"put",params:t})},audit:function(t){return Object(s["a"])({url:"/flowable/task/audit",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})},backNodes:function(t){return Object(s["a"])({url:"/flowable/task/backNodes",method:"put",params:{taskId:t}})},back:function(t){return Object(s["a"])({url:"/flowable/task/back",method:"put",params:t})},transfer:function(t,e){return Object(s["a"])({url:"/flowable/task/transfer",method:"put",params:{taskId:t,userId:e}})},addSignTask:function(t){return Object(s["a"])({url:"/flowable/task/addSignTask",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})},getFlowChart:function(t){return Object(s["a"])({url:"/flowable/task/getFlowChart",method:"get",params:{processInstanceId:t}})},urge:function(t){return Object(s["a"])({url:"/flowable/task/urge",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})}}},cbe8:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"5px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("流转记录")])]),a("el-steps",{attrs:{active:t.historicTaskStepNodeList.length}},t._l(t.historicTaskStepNodeList,(function(t,e){return a("el-step",{key:e,attrs:{title:t.activityName,"finish-status":"success",description:t.assigneeName+t.time}})})),1),a("el-table",{staticStyle:{width:"100%"},attrs:{size:"small",data:t.historicTaskList}},[a("el-table-column",{attrs:{prop:"histIns.activityName",label:"执行环节",width:"180"}}),a("el-table-column",{attrs:{prop:"assigneeName",label:"执行人",width:"180"}}),a("el-table-column",{attrs:{prop:"histIns.startTime",label:"开始时间"}}),a("el-table-column",{attrs:{prop:"histIns.endTime",label:"结束时间"}}),a("el-table-column",{attrs:{prop:"comment.status",label:"办理状态"}}),a("el-table-column",{attrs:{prop:"comment.message",label:"审批意见"}}),a("el-table-column",{attrs:{prop:"durationTime",label:"任务历时"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.durationTime||"0秒")+" ")]}}])})],1)],1)},r=[],i=(a("4160"),a("4ec9"),a("d3b7"),a("e25e"),a("3ca3"),a("159b"),a("ddb0"),{props:{historicTaskList:{type:Array,default:[]}},computed:{historicTaskStepNodeList:function(){var t=this,e=[];return this.historicTaskMap.forEach((function(a){var s={activityName:"",assigneeName:"",time:""};a.forEach((function(e){s.activityName=e.histIns.activityName,s.assigneeName+=(e.assigneeName||"")+",",s.time=e.histIns.startTime?t.moment(e.histIns.startTime).format("YYYY-MM-DD HH:mm:ss"):"--"})),e.push(s)})),e},historicTaskMap:function(){var t=new Map;return this.historicTaskList.forEach((function(e){var a=e.histIns.activityId+parseInt(e.histIns.startTime/1e3),s=t.get(a);if(s)s.push(e);else{var r=[];r.push(e),t.set(a,r)}})),t}}}),n=i,o=a("2877"),l=Object(o["a"])(n,s,r,!1,null,null,null);e["default"]=l.exports},d11e:function(t,e,a){t.exports=a.p+"img/5.e10e0160.png"},db3f:function(t,e,a){},dd2c:function(t,e,a){"use strict";var s=a("8f4d");e["a"]={submitStartFormData:function(t){return Object(s["a"])({url:"/flowable/form/submitStartFormData",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})},submitTaskFormData:function(t){return Object(s["a"])({url:"/flowable/form/submitTaskFormData",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})},getStartFormData:function(t){return Object(s["a"])({url:"/flowable/form/getStartFormData",method:"get",params:t})},getHistoryTaskFormData:function(t){return Object(s["a"])({url:"/flowable/form/getHistoryTaskFormData",method:"get",params:t})},getTaskFormData:function(t){return Object(s["a"])({url:"/flowable/form/getTaskFormData",method:"get",params:t})}}},f9a9:function(t,e,a){"use strict";var s=a("8f4d");e["a"]={list:function(t){return Object(s["a"])({url:"/flowable/process/list",method:"get",params:t})},runningDataList:function(t){return Object(s["a"])({url:"/flowable/process/runningData",method:"get",params:t})},historyListData:function(t){return Object(s["a"])({url:"/flowable/process/historyListData",method:"get",params:t})},revokeProcIns:function(t){return Object(s["a"])({url:"/flowable/process/revokeProcIns",method:"put",params:{id:t}})},deleteProcIns:function(t,e){return Object(s["a"])({url:"/flowable/process/deleteProcIns",method:"delete",params:{ids:t,reason:e}})},deleteAllProcIns:function(t){return Object(s["a"])({url:"/flowable/process/deleteAllProcIns",method:"delete",params:{procInsIds:t}})},suspend:function(t){return Object(s["a"])({url:"/flowable/process/update/suspend",method:"put",params:{procDefId:t}})},active:function(t){return Object(s["a"])({url:"/flowable/process/update/active",method:"put",params:{procDefId:t}})},stop:function(t,e){return Object(s["a"])({url:"/flowable/process/stop",method:"put",params:{id:t,message:e}})},getFlowChart:function(t){return Object(s["a"])({url:"/flowable/process/getFlowChart",method:"get",params:{processDefId:t}})},queryProcessStatus:function(t,e){return Object(s["a"])({url:"/flowable/process/queryProcessStatus",method:"get",params:{procDefId:t,procInsId:e}})},exist:function(t){return Object(s["a"])({url:"/flowable/process/exist",method:"get",params:{key:t}})}}},fd0e:function(t,e,a){}}]);