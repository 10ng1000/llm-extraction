(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38c98e7c"],{1952:function(e,t,a){"use strict";var i=a("8f4d");t["a"]={save:function(e){return Object(i["a"])({url:"/form/make/save",method:"post",data:e})},saveFormSource:function(e){return Object(i["a"])({url:"/form/make/saveFormSource",method:"post",data:e})},saveBasicInfo:function(e){return Object(i["a"])({url:"/form/make/saveBasicInfo",method:"post",data:e})},delete:function(e){return Object(i["a"])({url:"/form/make/delete",method:"delete",params:{ids:e}})},queryById:function(e){return Object(i["a"])({url:"/form/make/queryById",method:"get",params:{id:e}})},getTableColumnList:function(e){return Object(i["a"])({url:"/form/make/getTableColumnList",method:"get",params:e})},getTableList:function(e){return Object(i["a"])({url:"/form/make/getTableList",method:"get",params:e})},list:function(e){return Object(i["a"])({url:"/form/make/list",method:"get",params:e})},validateTableNoExist:function(e){return Object(i["a"])({url:"/form/make/validateTableNoExist",method:"get",params:e})},validateKeyNoExist:function(e){return Object(i["a"])({url:"/form/make/validateKeyNoExist",method:"get",params:e})},createMenu:function(e){return Object(i["a"])({url:"/form/make/createMenu",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:e})}}},"4ec9":function(e,t,a){a("6f48")},"6f48":function(e,t,a){"use strict";var i=a("6d61"),n=a("6566");i("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n)},b014:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.title,"close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[e.visible?a("fm-generate-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"generateForm",class:"view"===e.method?"readonly":"",attrs:{edit:"view"!==e.method,data:e.options,value:e.initData}}):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:function(t){e.visible=!1}}},[e._v("关闭")]),"view"!=e.method?a("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{size:"small",type:"primary",icon:"el-icon-circle-check"},on:{click:function(t){return e.doSubmit()}}},[e._v("确定")]):e._e()],1)],1)],1)},n=[],o=(a("4160"),a("4ec9"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("1952")),r=a("b818"),s={data:function(){return{title:"",method:"",beanId:"",visible:!1,loading:!1,initData:{},dataBindMap:new Map,options:{list:[]}}},activated:function(){this.createForm()},components:{},methods:{init:function(e,t,a){var i=this;this.method=e,this.beanId=a,this.initData={},"add"===e?this.title="新建":"edit"===e?this.title="修改":"view"===e&&(this.title="查看"),this.visible=!0,this.loading=!1,this.$nextTick((function(){i.$refs.generateForm.reset(),a&&(i.loading=!0,r["a"].queryById({formId:t,id:a}).then((function(e){var t=e.data;for(var a in i.loading=!1,t){var n=i.dataBindMap.get(a);n&&("checkbox"===n["type"]||"imgupload"===n["type"]||"table"===n["type"]||"select"===n["type"]&&n.options.multiple||"fileupload"===n["type"])&&(t[a]&&"string"===typeof t[a]?t[a]=JSON.parse(t[a]):t[a]||(t[a]=[])),!n||"number"!==n["type"]&&"number"!==n["options"].dataType||void 0!==t[a]&&""!==t[a]&&"string"===typeof t[a]&&(t[a]=JSON.parse(t[a]))}i.initData=t})))}))},generateModel:function(e){for(var t=this,a=0;a<e.length;a++)"grid"===e[a].type?e[a].columns.forEach((function(e){t.generateModel(e.list)})):"tabs"===e[a].type?e[a].tabs.forEach((function(e){t.generateModel(e.list)})):e[a].options.dataBind&&this.dataBindMap.set(e[a].model,e[a])},createForm:function(){var e=this;o["a"].queryById(this.$route.query.id).then((function(t){var a=t.data;a.source?e.options=JSON.parse(a.source):e.options={list:[],config:{labelWidth:100,labelPosition:"right",size:"small",customClass:""}},e.dataBindMap.clear(),e.generateModel(e.options.list)}))},doSubmit:function(){var e=this;"1"===this.options.config.eventType&&new Function("return ".concat(this.options.config.customJs))(),this.loading=!0,this.$refs.generateForm.getData().then((function(t){e.beanId&&(t.id=e.beanId),r["a"].save({formId:e.$route.query.id,data:JSON.stringify(t)}).then((function(t){var a=t.data;e.visible=!1,e.loading=!1,e.$message.success(a),e.$emit("refreshDataList"),"2"===e.options.config.eventType&&new Function("return ".concat(e.options.config.customJs))()}))})).catch((function(e){}))}}},c=s,l=a("2877"),u=Object(l["a"])(c,i,n,!1,null,null,null);t["default"]=u.exports},b818:function(e,t,a){"use strict";var i=a("8f4d");t["a"]={save:function(e){return Object(i["a"])({url:"/form/generate/save",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:e})},queryById:function(e){return Object(i["a"])({url:"/form/generate/queryById",method:"get",params:e})},delete:function(e){return Object(i["a"])({url:"/form/generate/delete",method:"delete",params:e})},list:function(e){return Object(i["a"])({url:"/form/generate/list",method:"get",params:e})}}}}]);